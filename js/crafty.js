




<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Crafty/dist/crafty-min.js at release Â· craftyjs/Crafty</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <meta property="fb:app_id" content="1401488693436528"/>

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="craftyjs/Crafty" name="twitter:title" /><meta content="Crafty - JavaScript Game Engine" name="twitter:description" /><meta content="https://avatars.githubusercontent.com/u/1334729" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars.githubusercontent.com/u/1334729" property="og:image" /><meta content="craftyjs/Crafty" property="og:title" /><meta content="https://github.com/craftyjs/Crafty" property="og:url" /><meta content="Crafty - JavaScript Game Engine" property="og:description" />

    <meta name="hostname" content="github-fe134-cp1-prd.iad.github.net">
    <meta name="ruby" content="ruby 2.1.0p0-github-tcmalloc (87c9373a41) [x86_64-linux]">
    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />


    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_source" data-pjax-transient />
    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="8A1A4135:3E9F:708B8B2:53122D2A" name="octolytics-dimension-request_id" /><meta content="974567" name="octolytics-actor-id" /><meta content="erbycfischer" name="octolytics-actor-login" /><meta content="1b479ca71ad9deea4ffb462afbe47e093392056ec7265b004cf3d7322730f4d4" name="octolytics-actor-hash" />
    

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="zkpWN7st/go6szptDdypitnRsiCtPyaAymzl6umySMs=" name="csrf-token" />

    <link href="https://github.global.ssl.fastly.net/assets/github-3eb3754d4f9f6036875199a01278c6ad6cc3d2ad.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://github.global.ssl.fastly.net/assets/github2-cb91aec5b799e43ecbc2cb6ac665bc7289f0d01e.css" media="all" rel="stylesheet" type="text/css" />
    
    


      <script crossorigin="anonymous" src="https://github.global.ssl.fastly.net/assets/frameworks-75c3712476c7af863873362d0cdf06a94a4b4fa3.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="https://github.global.ssl.fastly.net/assets/github-0a9d4e294873972a56136b7a78254286688653c2.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="21b0158f79edcff84dd6f271606bd753">

        <link data-pjax-transient rel='permalink' href='/craftyjs/Crafty/blob/c59d9cdcdd045d05e5510820a5998da970d4cb8a/dist/crafty-min.js'>

  <meta name="description" content="Crafty - JavaScript Game Engine" />

  <meta content="1334729" name="octolytics-dimension-user_id" /><meta content="craftyjs" name="octolytics-dimension-user_login" /><meta content="1052675" name="octolytics-dimension-repository_id" /><meta content="craftyjs/Crafty" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="1052675" name="octolytics-dimension-repository_network_root_id" /><meta content="craftyjs/Crafty" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/craftyjs/Crafty/commits/release.atom" rel="alternate" title="Recent Commits to Crafty:release" type="application/atom+xml" />

  </head>


  <body class="logged_in  env-production linux vis-public page-blob tipsy-tooltips">
    <div class="wrapper">
      
      
      
      


      <div class="header header-logged-in true">
  <div class="container clearfix">

    <a class="header-logo-invertocat" href="https://github.com/orgs/UAB-ACM-Hackathon/dashboard">
  <span class="mega-octicon octicon-mark-github"></span>
</a>

    
    <a href="/notifications" aria-label="You have no unread notifications" class="notification-indicator tooltipped tooltipped-s" data-gotokey="n">
        <span class="mail-status all-read"></span>
</a>

      <div class="command-bar js-command-bar  in-repository">
          <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    data-username="erbycfischer"
      data-repo="craftyjs/Crafty"
      data-branch="release"
      data-sha="b871576f3c50619d7821d9e06d27c42a8ff1eeac"
  >

    <input type="hidden" name="nwo" value="craftyjs/Crafty" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target" role="button" aria-haspopup="true">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="help tooltipped tooltipped-s" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
        <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
            <li><a href="https://gist.github.com">Gist</a></li>
            <li><a href="/blog">Blog</a></li>
          <li><a href="https://help.github.com">Help</a></li>
        </ul>
      </div>

    


  <ul id="user-links">
    <li>
      <a href="/erbycfischer" class="name">
        <img alt="Erby Fischer" class=" js-avatar" data-user="974567" height="20" src="https://avatars.githubusercontent.com/u/974567" width="20" /> erbycfischer
      </a>
    </li>

    <li class="new-menu dropdown-toggle js-menu-container">
      <a href="#" class="js-menu-target tooltipped tooltipped-s" aria-label="Create new...">
        <span class="octicon octicon-plus"></span>
        <span class="dropdown-arrow"></span>
      </a>

      <div class="new-menu-content js-menu-content">
      </div>
    </li>

    <li>
      <a href="/settings/profile" id="account_settings"
        class="tooltipped tooltipped-s"
        aria-label="Account settings ">
        <span class="octicon octicon-tools"></span>
      </a>
    </li>
    <li>
      <a class="tooltipped tooltipped-s" href="/logout" data-method="post" id="logout" aria-label="Sign out">
        <span class="octicon octicon-log-out"></span>
      </a>
    </li>

  </ul>

<div class="js-new-dropdown-contents hidden">
  

<ul class="dropdown-menu">
  <li>
    <a href="/new"><span class="octicon octicon-repo-create"></span> New repository</a>
  </li>
  <li>
    <a href="/organizations/new"><span class="octicon octicon-organization"></span> New organization</a>
  </li>


    <li class="section-title">
      <span title="craftyjs/Crafty">This repository</span>
    </li>
      <li>
        <a href="/craftyjs/Crafty/issues/new"><span class="octicon octicon-issue-opened"></span> New issue</a>
      </li>
</ul>

</div>


    
  </div>
</div>

      

        




          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">

    <li class="subscription">
      <form accept-charset="UTF-8" action="/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="zkpWN7st/go6szptDdypitnRsiCtPyaAymzl6umySMs=" /></div>  <input id="repository_id" name="repository_id" type="hidden" value="1052675" />

    <div class="select-menu js-menu-container js-select-menu">
      <a class="social-count js-social-count" href="/craftyjs/Crafty/watchers">
        97
      </a>
      <span class="minibutton select-menu-button with-count js-menu-target" role="button" tabindex="0" aria-haspopup="true">
        <span class="js-select-button">
          <span class="octicon octicon-eye-watch"></span>
          Watch
        </span>
      </span>

      <div class="select-menu-modal-holder">
        <div class="select-menu-modal subscription-menu-modal js-menu-content" aria-hidden="true">
          <div class="select-menu-header">
            <span class="select-menu-title">Notification status</span>
            <span class="octicon octicon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container" role="menu">

            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                <h4>Not watching</h4>
                <span class="description">You only receive notifications for conversations in which you participate or are @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-watch"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                <h4>Watching</h4>
                <span class="description">You receive notifications for all conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-unwatch"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore" />
                <h4>Ignoring</h4>
                <span class="description">You do not receive any notifications for conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

  <li>
  

  <div class="js-toggler-container js-social-container starring-container ">
    <a href="/craftyjs/Crafty/unstar"
      class="minibutton with-count js-toggler-target star-button starred"
      aria-label="Unstar this repository" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star-delete"></span><span class="text">Unstar</span>
    </a>

    <a href="/craftyjs/Crafty/star"
      class="minibutton with-count js-toggler-target star-button unstarred"
      aria-label="Star this repository" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star"></span><span class="text">Star</span>
    </a>

      <a class="social-count js-social-count" href="/craftyjs/Crafty/stargazers">
        1,229
      </a>
  </div>

  </li>


        <li>
          <a href="/craftyjs/Crafty/fork" class="minibutton with-count js-toggler-target fork-button lighter tooltipped-n" title="Fork this repo" rel="facebox nofollow">
            <span class="octicon octicon-git-branch-create"></span><span class="text">Fork</span>
          </a>
          <a href="/craftyjs/Crafty/network" class="social-count">294</a>
        </li>


</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author">
            <a href="/craftyjs" class="url fn" itemprop="url" rel="author"><span itemprop="title">craftyjs</span></a>
          </span>
          <span class="repohead-name-divider">/</span>
          <strong><a href="/craftyjs/Crafty" class="js-current-repository js-repo-home-link">Crafty</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped tooltipped-w" aria-label="Code">
        <a href="/craftyjs/Crafty/tree/release" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /craftyjs/Crafty/tree/release">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped tooltipped-w" aria-label="Issues">
          <a href="/craftyjs/Crafty/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="i" data-selected-links="repo_issues /craftyjs/Crafty/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>42</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
        <a href="/craftyjs/Crafty/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /craftyjs/Crafty/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>11</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


        <li class="tooltipped tooltipped-w" aria-label="Wiki">
          <a href="/craftyjs/Crafty/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_wiki /craftyjs/Crafty/wiki">
            <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>
    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped tooltipped-w" aria-label="Pulse">
        <a href="/craftyjs/Crafty/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /craftyjs/Crafty/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Graphs">
        <a href="/craftyjs/Crafty/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /craftyjs/Crafty/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Network">
        <a href="/craftyjs/Crafty/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /craftyjs/Crafty/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/craftyjs/Crafty.git" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/craftyjs/Crafty.git" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="ssh"
  data-url="/users/set_protocol?protocol_selector=ssh&amp;protocol_type=clone">
  <h3><strong>SSH</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="git@github.com:craftyjs/Crafty.git" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="git@github.com:craftyjs/Crafty.git" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/craftyjs/Crafty" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/craftyjs/Crafty" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>,
      <a href="#" class="js-clone-selector" data-protocol="ssh">SSH</a>,
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>



                <a href="/craftyjs/Crafty/archive/release.zip"
                   class="minibutton sidebar-button"
                   title="Download this repository as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          


<!-- blob contrib key: blob_contributors:v21:480c0c371bb19df59d31a7a51720ce0c -->

<p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

<a href="/craftyjs/Crafty/find/release" data-pjax data-hotkey="t" class="js-show-file-finder" style="display:none">Show File Finder</a>

<div class="file-navigation">
  

<div class="select-menu js-menu-container js-select-menu" >
  <span class="minibutton select-menu-button js-menu-target" data-hotkey="w"
    data-master-branch="develop"
    data-ref="release"
    role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button">release</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-remove-close js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/blob/develop/dist/crafty-min.js"
                 data-name="develop"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="develop">develop</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/blob/release/dist/crafty-min.js"
                 data-name="release"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="release">release</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/blob/testing/dist/crafty-min.js"
                 data-name="testing"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="testing">testing</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6-beta/dist/crafty-min.js"
                 data-name="0.6-beta"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6-beta">0.6-beta</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.2-rc/dist/crafty-min.js"
                 data-name="0.6.2-rc"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.2-rc">0.6.2-rc</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.2-beta/dist/crafty-min.js"
                 data-name="0.6.2-beta"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.2-beta">0.6.2-beta</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.2/dist/crafty-min.js"
                 data-name="0.6.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.2">0.6.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.1/dist/crafty-min.js"
                 data-name="0.6.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.1">0.6.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.0-rc/dist/crafty-min.js"
                 data-name="0.6.0-rc"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.0-rc">0.6.0-rc</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.0-alpha2/dist/crafty-min.js"
                 data-name="0.6.0-alpha2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.0-alpha2">0.6.0-alpha2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.0-alpha/dist/crafty-min.js"
                 data-name="0.6.0-alpha"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.0-alpha">0.6.0-alpha</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.6.0/dist/crafty-min.js"
                 data-name="0.6.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.6.0">0.6.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.5.4/dist/crafty-min.js"
                 data-name="0.5.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.5.4">0.5.4</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.5.3/dist/crafty-min.js"
                 data-name="0.5.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.5.3">0.5.3</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.5.2/dist/crafty-min.js"
                 data-name="0.5.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.5.2">0.5.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.5.1/dist/crafty-min.js"
                 data-name="0.5.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.5.1">0.5.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.5.0/dist/crafty-min.js"
                 data-name="0.5.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.5.0">0.5.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.9/dist/crafty-min.js"
                 data-name="0.4.9"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.9">0.4.9</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.8/dist/crafty-min.js"
                 data-name="0.4.8"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.8">0.4.8</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.7/dist/crafty-min.js"
                 data-name="0.4.7"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.7">0.4.7</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.6/dist/crafty-min.js"
                 data-name="0.4.6"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.6">0.4.6</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.5/dist/crafty-min.js"
                 data-name="0.4.5"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.5">0.4.5</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.3/dist/crafty-min.js"
                 data-name="0.4.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.3">0.4.3</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.2/dist/crafty-min.js"
                 data-name="0.4.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.2">0.4.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4.1/dist/crafty-min.js"
                 data-name="0.4.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4.1">0.4.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.4/dist/crafty-min.js"
                 data-name="0.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.4">0.4</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.3.1/dist/crafty-min.js"
                 data-name="0.3.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.3.1">0.3.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.3/dist/crafty-min.js"
                 data-name="0.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.3">0.3</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.2.1/dist/crafty-min.js"
                 data-name="0.2.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.2.1">0.2.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.2/dist/crafty-min.js"
                 data-name="0.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.2">0.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/craftyjs/Crafty/tree/0.1/dist/crafty-min.js"
                 data-name="0.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.1">0.1</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->

  <div class="breadcrumb">
    <span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/craftyjs/Crafty/tree/release" data-branch="release" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">Crafty</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/craftyjs/Crafty/tree/release/dist" data-branch="release" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">dist</span></a></span><span class="separator"> / </span><strong class="final-path">crafty-min.js</strong> <span aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="dist/crafty-min.js" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


  <div class="commit file-history-tease">
    <img alt="starwed" class="main-avatar js-avatar" data-user="34907" height="24" src="https://0.gravatar.com/avatar/5b73cb6573d6fccb3529ac558ba1ce36?d=https%3A%2F%2Fidenticons.github.com%2Fbbe4bffdb46a85d01137ad4638d846a9.png&amp;r=x&amp;s=140" width="24" />
    <span class="author"><a href="/starwed" rel="author">starwed</a></span>
    <time class="js-relative-date" data-title-format="YYYY-MM-DD HH:mm:ss" datetime="2014-01-31T13:53:13-08:00" title="2014-01-31 13:53:13">January 31, 2014</time>
    <div class="commit-title">
        <a href="/craftyjs/Crafty/commit/c59d9cdcdd045d05e5510820a5998da970d4cb8a" class="message" data-pjax="true" title="Update distribution files">Update distribution files</a>
    </div>

    <div class="participation">
      <p class="quickstat"><a href="#blob_contributors_box" rel="facebox"><strong>2</strong> contributors</a></p>
          <a class="avatar tooltipped tooltipped-s" aria-label="starwed" href="/craftyjs/Crafty/commits/release/dist/crafty-min.js?author=starwed"><img alt="starwed" class=" js-avatar" data-user="34907" height="20" src="https://0.gravatar.com/avatar/5b73cb6573d6fccb3529ac558ba1ce36?d=https%3A%2F%2Fidenticons.github.com%2Fbbe4bffdb46a85d01137ad4638d846a9.png&amp;r=x&amp;s=140" width="20" /></a>
    <a class="avatar tooltipped tooltipped-s" aria-label="kevinsimper" href="/craftyjs/Crafty/commits/release/dist/crafty-min.js?author=kevinsimper"><img alt="Kevin Simper" class=" js-avatar" data-user="1126497" height="20" src="https://0.gravatar.com/avatar/b120b6c94e16f352c691849391324206?d=https%3A%2F%2Fidenticons.github.com%2Fd5510ec971fa9b95a53e1637f2d344d9.png&amp;r=x&amp;s=140" width="20" /></a>


    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list">
          <li class="facebox-user-list-item">
            <img alt="starwed" class=" js-avatar" data-user="34907" height="24" src="https://0.gravatar.com/avatar/5b73cb6573d6fccb3529ac558ba1ce36?d=https%3A%2F%2Fidenticons.github.com%2Fbbe4bffdb46a85d01137ad4638d846a9.png&amp;r=x&amp;s=140" width="24" />
            <a href="/starwed">starwed</a>
          </li>
          <li class="facebox-user-list-item">
            <img alt="Kevin Simper" class=" js-avatar" data-user="1126497" height="24" src="https://0.gravatar.com/avatar/b120b6c94e16f352c691849391324206?d=https%3A%2F%2Fidenticons.github.com%2Fd5510ec971fa9b95a53e1637f2d344d9.png&amp;r=x&amp;s=140" width="24" />
            <a href="/kevinsimper">kevinsimper</a>
          </li>
      </ul>
    </div>
  </div>

<div class="file-box">
  <div class="file">
    <div class="meta clearfix">
      <div class="info file-name">
        <span class="icon"><b class="octicon octicon-file-text"></b></span>
        <span class="mode" title="File Mode">file</span>
        <span class="meta-divider"></span>
          <span>12 lines (11 sloc)</span>
          <span class="meta-divider"></span>
        <span>106.667 kb</span>
      </div>
      <div class="actions">
        <div class="button-group">
                <a class="minibutton tooltipped tooltipped-n js-update-url-with-hash"
                   aria-label="Clicking this button will automatically fork this project so you can edit the file"
                   href="/craftyjs/Crafty/edit/release/dist/crafty-min.js"
                   data-method="post" rel="nofollow">Edit</a>
          <a href="/craftyjs/Crafty/raw/release/dist/crafty-min.js" class="button minibutton " id="raw-url">Raw</a>
            <a href="/craftyjs/Crafty/blame/release/dist/crafty-min.js" class="button minibutton js-update-url-with-hash">Blame</a>
          <a href="/craftyjs/Crafty/commits/release/dist/crafty-min.js" class="button minibutton " rel="nofollow">History</a>
        </div><!-- /.button-group -->
          <a class="minibutton danger empty-icon tooltipped tooltipped-s"
             href="/craftyjs/Crafty/delete/release/dist/crafty-min.js"
             aria-label="Fork this project and delete file"
             data-method="post" data-test-id="delete-blob-file" rel="nofollow">
          Delete
        </a>
      </div><!-- /.actions -->
    </div>
        <div class="blob-wrapper data type-javascript js-blob-data">
        <table class="file-code file-diff tab-size-8">
          <tr class="file-code-line">
            <td class="blob-line-nums">
              <span id="L1" rel="#L1">1</span>
<span id="L2" rel="#L2">2</span>
<span id="L3" rel="#L3">3</span>
<span id="L4" rel="#L4">4</span>
<span id="L5" rel="#L5">5</span>
<span id="L6" rel="#L6">6</span>
<span id="L7" rel="#L7">7</span>
<span id="L8" rel="#L8">8</span>
<span id="L9" rel="#L9">9</span>
<span id="L10" rel="#L10">10</span>
<span id="L11" rel="#L11">11</span>
<span id="L12" rel="#L12">12</span>

            </td>
            <td class="blob-line-code"><div class="code-body highlight"><pre><div class='line' id='LC1'>/**</div><div class='line' id='LC2'>&nbsp;* crafty 0.6.2</div><div class='line' id='LC3'>&nbsp;* http://craftyjs.com/</div><div class='line' id='LC4'>&nbsp;*</div><div class='line' id='LC5'>&nbsp;* Copyright 2014, Louis Stowasser</div><div class='line' id='LC6'>&nbsp;* Dual licensed under the MIT or GPL licenses.</div><div class='line' id='LC7'>&nbsp;*/</div><div class='line' id='LC8'><br/></div><div class='line' id='LC9'>(function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var h=&quot;function&quot;==typeof require&amp;&amp;require;if(!a&amp;&amp;h)return h(o,!0);if(s)return s(o,!0);throw Error(&quot;Cannot find module &#39;&quot;+o+&quot;&#39;&quot;)}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var s=&quot;function&quot;==typeof require&amp;&amp;require,o=0;n.length&gt;o;o++)r(n[o]);return r})({1:[function(t){var e=t(&quot;./core.js&quot;),i=(window.document,t(&quot;./HashMap.js&quot;));e._rectPool=function(){var t=[],e=0;return{get:function(i,n,r,s){e&gt;=t.length&amp;&amp;t.push({});var o=t[e++];return o._x=i,o._y=n,o._w=r,o._h=s,o},copy:function(i){e&gt;=t.length&amp;&amp;t.push({});var n=t[e++];return n._x=i._x,n._y=i._y,n._w=i._w,n._h=i._h,n},recycle:function(){e--}}}(),e.map=new i;var n=Math,r=(n.cos,n.sin,n.PI),s=r/180;e.extend({zeroFill:function(t,e){return e-=(&quot;&quot;+t).length,e&gt;0?Array(e+(/\./.test(t)?2:1)).join(&quot;0&quot;)+t:&quot;&quot;+t}}),e.c(&quot;2D&quot;,{_x:0,_y:0,_w:0,_h:0,_z:0,_rotation:0,_alpha:1,_visible:!0,_globalZ:null,_origin:null,_mbr:null,_entry:null,_children:null,_parent:null,_changed:!1,_defineGetterSetter_setter:function(){this.__defineSetter__(&quot;x&quot;,function(t){this._attr(&quot;_x&quot;,t)}),this.__defineSetter__(&quot;y&quot;,function(t){this._attr(&quot;_y&quot;,t)}),this.__defineSetter__(&quot;w&quot;,function(t){this._attr(&quot;_w&quot;,t)}),this.__defineSetter__(&quot;h&quot;,function(t){this._attr(&quot;_h&quot;,t)}),this.__defineSetter__(&quot;z&quot;,function(t){this._attr(&quot;_z&quot;,t)}),this.__defineSetter__(&quot;rotation&quot;,function(t){this._attr(&quot;_rotation&quot;,t)}),this.__defineSetter__(&quot;alpha&quot;,function(t){this._attr(&quot;_alpha&quot;,t)}),this.__defineSetter__(&quot;visible&quot;,function(t){this._attr(&quot;_visible&quot;,t)}),this.__defineGetter__(&quot;x&quot;,function(){return this._x}),this.__defineGetter__(&quot;y&quot;,function(){return this._y}),this.__defineGetter__(&quot;w&quot;,function(){return this._w}),this.__defineGetter__(&quot;h&quot;,function(){return this._h}),this.__defineGetter__(&quot;z&quot;,function(){return this._z}),this.__defineGetter__(&quot;rotation&quot;,function(){return this._rotation}),this.__defineGetter__(&quot;alpha&quot;,function(){return this._alpha}),this.__defineGetter__(&quot;visible&quot;,function(){return this._visible}),this.__defineGetter__(&quot;parent&quot;,function(){return this._parent}),this.__defineGetter__(&quot;numChildren&quot;,function(){return this._children.length})},_defineGetterSetter_defineProperty:function(){Object.defineProperty(this,&quot;x&quot;,{set:function(t){this._attr(&quot;_x&quot;,t)},get:function(){return this._x},configurable:!0}),Object.defineProperty(this,&quot;y&quot;,{set:function(t){this._attr(&quot;_y&quot;,t)},get:function(){return this._y},configurable:!0}),Object.defineProperty(this,&quot;w&quot;,{set:function(t){this._attr(&quot;_w&quot;,t)},get:function(){return this._w},configurable:!0}),Object.defineProperty(this,&quot;h&quot;,{set:function(t){this._attr(&quot;_h&quot;,t)},get:function(){return this._h},configurable:!0}),Object.defineProperty(this,&quot;z&quot;,{set:function(t){this._attr(&quot;_z&quot;,t)},get:function(){return this._z},configurable:!0}),Object.defineProperty(this,&quot;rotation&quot;,{set:function(t){this._attr(&quot;_rotation&quot;,t)},get:function(){return this._rotation},configurable:!0}),Object.defineProperty(this,&quot;alpha&quot;,{set:function(t){this._attr(&quot;_alpha&quot;,t)},get:function(){return this._alpha},configurable:!0}),Object.defineProperty(this,&quot;visible&quot;,{set:function(t){this._attr(&quot;_visible&quot;,t)},get:function(){return this._visible},configurable:!0})},init:function(){this._globalZ=this[0],this._origin={x:0,y:0},this._bx1=0,this._bx2=0,this._by1=0,this._by2=0,this._children=[],e.support.setter?this._defineGetterSetter_setter():e.support.defineProperty&amp;&amp;this._defineGetterSetter_defineProperty(),this._entry=e.map.insert(this),this.bind(&quot;Move&quot;,function(t){var e=this._cbr||this._mbr||this;this._entry.update(e),this._children.length&gt;0&amp;&amp;this._cascade(t)}),this.bind(&quot;Rotate&quot;,function(t){var e=this._cbr||this._mbr||this;this._entry.update(e),this._children.length&gt;0&amp;&amp;this._cascade(t)}),this.bind(&quot;Remove&quot;,function(){if(this._children){for(var t=0;this._children.length&gt;t;t++)delete this._children[t]._parent,this._children[t].destroy&amp;&amp;this._children[t].destroy();this._children=[]}this._parent&amp;&amp;this._parent.detach(this),e.map.remove(this),this.detach()})},offsetBoundary:function(t,e,i,n){return 1===arguments.length&amp;&amp;(e=i=n=t),this._bx1=t,this._bx2=i,this._by1=e,this._by2=n,this.trigger(&quot;BoundaryOffset&quot;),this._calculateMBR(),this},_calculateMBR:function(){var t=this._origin.x+this._x,e=this._origin.y+this._y,i=-this._rotation*s,n=this._x-this._bx1-t,r=this._x+this._w+this._bx2-t,o=this._y-this._by1-e,a=this._y+this._h+this._by2-e,h=Math.cos(i),c=Math.sin(i);h=1e-10&gt;h&amp;&amp;h&gt;-1e-10?0:h,c=1e-10&gt;c&amp;&amp;c&gt;-1e-10?0:c;var u=n*h+o*c,l=-n*c+o*h,_=r*h+o*c,d=-r*c+o*h,f=r*h+a*c,p=-r*c+a*h,g=n*h+a*c,m=-n*c+a*h,v=Math.floor(Math.min(u,_,f,g)+t),y=Math.floor(Math.min(l,d,p,m)+e),w=Math.ceil(Math.max(u,_,f,g)+t),x=Math.ceil(Math.max(l,d,p,m)+e);if(this._mbr?(this._mbr._x=v,this._mbr._y=y,this._mbr._w=w-v,this._mbr._h=x-y):this._mbr={_x:v,_y:y,_w:w-v,_h:x-y},this._cbr){var b=this._cbr,D=b.cx,M=b.cy,R=b.r,E=t+(D+this._x-t)*h+(M+this._y-e)*c,C=e-(D+this._x-t)*c+(M+this._y-e)*h;b._x=Math.min(E-R,v),b._y=Math.min(C-R,y),b._w=Math.max(E+R,w)-b._x,b._h=Math.max(C+R,x)-b._y}},_rotate:function(t){var e=-1*(t%360),i=this._rotation-t;if(0!==i){this._rotation=t;var n=e*s,r={x:this._origin.x+this._x,y:this._origin.y+this._y};this._calculateMBR();var o=i*s;Math.cos(n),Math.sin(n),this.trigger(&quot;Rotate&quot;,{cos:Math.cos(o),sin:Math.sin(o),deg:i,rad:o,o:r})}},area:function(){return this._w*this._h},intersect:function(t,e,i,n){var r,s=this._mbr||this;return r=&quot;object&quot;==typeof t?t:{x:t,y:e,w:i,h:n},s._x&lt;r.x+r.w&amp;&amp;s._x+s._w&gt;r.x&amp;&amp;s._y&lt;r.y+r.h&amp;&amp;s._h+s._y&gt;r.y},within:function(t,e,i,n){var r,s=this._mbr||this;return r=&quot;object&quot;==typeof t?t:{_x:t,_y:e,_w:i,_h:n},r._x&lt;=s._x&amp;&amp;r._x+r._w&gt;=s._x+s._w&amp;&amp;r._y&lt;=s._y&amp;&amp;r._y+r._h&gt;=s._y+s._h},contains:function(t,e,i,n){var r,s=this._mbr||this;return r=&quot;object&quot;==typeof t?t:{_x:t,_y:e,_w:i,_h:n},r._x&gt;=s._x&amp;&amp;r._x+r._w&lt;=s._x+s._w&amp;&amp;r._y&gt;=s._y&amp;&amp;r._y+r._h&lt;=s._y+s._h},pos:function(){return{_x:this._x,_y:this._y,_w:this._w,_h:this._h}},mbr:function(){return this._mbr?{_x:this._mbr._x,_y:this._mbr._y,_w:this._mbr._w,_h:this._mbr._h}:this.pos()},isAt:function(t,e){if(this.mapArea)return this.mapArea.containsPoint(t,e);if(this.map)return this.map.containsPoint(t,e);var i=this._mbr||this;return t&gt;=i._x&amp;&amp;i._x+i._w&gt;=t&amp;&amp;e&gt;=i._y&amp;&amp;i._y+i._h&gt;=e},move:function(t,e){return&quot;n&quot;===t.charAt(0)&amp;&amp;(this.y-=e),&quot;s&quot;===t.charAt(0)&amp;&amp;(this.y+=e),(&quot;e&quot;===t||&quot;e&quot;===t.charAt(1))&amp;&amp;(this.x+=e),(&quot;w&quot;===t||&quot;w&quot;===t.charAt(1))&amp;&amp;(this.x-=e),this},shift:function(t,e,i,n){return t&amp;&amp;(this.x+=t),e&amp;&amp;(this.y+=e),i&amp;&amp;(this.w+=i),n&amp;&amp;(this.h+=n),this},_cascade:function(t){if(t){var e,i=0,n=this._children,r=n.length;if(t.cos)for(;r&gt;i;++i)e=n[i],&quot;rotate&quot;in e&amp;&amp;e.rotate(t);else for(var s=this._x-t._x,o=this._y-t._y,a=this._w-t._w,h=this._h-t._h;r&gt;i;++i)e=n[i],e.shift(s,o,a,h)}},attach:function(){for(var t,e=0,i=arguments,n=arguments.length;n&gt;e;++e)t=i[e],t._parent&amp;&amp;t._parent.detach(t),t._parent=this,this._children.push(t);return this},detach:function(t){var e;if(!t){for(e=0;this._children.length&gt;e;e++)this._children[e]._parent=null;return this._children=[],this}for(e=0;this._children.length&gt;e;e++)this._children[e]==t&amp;&amp;this._children.splice(e,1);return t._parent=null,this},origin:function(t,e){if(&quot;string&quot;==typeof t)if(&quot;centre&quot;===t||&quot;center&quot;===t||-1===t.indexOf(&quot; &quot;))t=this._w/2,e=this._h/2;else{var i=t.split(&quot; &quot;);&quot;top&quot;===i[0]?e=0:&quot;bottom&quot;===i[0]?e=this._h:(&quot;middle&quot;===i[0]||&quot;center&quot;===i[1]||&quot;centre&quot;===i[1])&amp;&amp;(e=this._h/2),&quot;center&quot;===i[1]||&quot;centre&quot;===i[1]||&quot;middle&quot;===i[1]?t=this._w/2:&quot;left&quot;===i[1]?t=0:&quot;right&quot;===i[1]&amp;&amp;(t=this._w)}return this._origin.x=t,this._origin.y=e,this},flip:function(t){return t=t||&quot;X&quot;,this[&quot;_flip&quot;+t]||(this[&quot;_flip&quot;+t]=!0,this.trigger(&quot;Invalidate&quot;)),this},unflip:function(t){return t=t||&quot;X&quot;,this[&quot;_flip&quot;+t]&amp;&amp;(this[&quot;_flip&quot;+t]=!1,this.trigger(&quot;Invalidate&quot;)),this},rotate:function(t){var e,i;e=(this._x+this._origin.x-t.o.x)*t.cos+(this._y+this._origin.y-t.o.y)*t.sin+(t.o.x-this._origin.x),i=(this._y+this._origin.y-t.o.y)*t.cos-(this._x+this._origin.x-t.o.x)*t.sin+(t.o.y-this._origin.y),this._attr(&quot;_rotation&quot;,this._rotation-t.deg),this._attr(&quot;_x&quot;,e),this._attr(&quot;_y&quot;,i)},_attr:function(t,i){if(this[t]!==i){var n,r=e._rectPool.copy(this);if(&quot;_rotation&quot;===t)this._rotate(i);else if(&quot;_z&quot;===t)this._globalZ=parseInt(i+e.zeroFill(this[0],5),10),this.trigger(&quot;reorder&quot;);else if(&quot;_x&quot;===t||&quot;_y&quot;===t)n=this._mbr,n&amp;&amp;(n[t]-=this[t]-i,this._cbr&amp;&amp;(this._cbr[t]-=this[t]-i)),this[t]=i,this.trigger(&quot;Move&quot;,r);else if(&quot;_h&quot;===t||&quot;_w&quot;===t){n=this._mbr;var s=this[t];this[t]=i,n&amp;&amp;this._calculateMBR(),&quot;_w&quot;===t?this.trigger(&quot;Resize&quot;,{axis:&quot;w&quot;,amount:i-s}):&quot;_h&quot;===t&amp;&amp;this.trigger(&quot;Resize&quot;,{axis:&quot;h&quot;,amount:i-s}),this.trigger(&quot;Move&quot;,r)}this[t]=i,this.trigger(&quot;Invalidate&quot;),e._rectPool.recycle(r)}}}),e.c(&quot;Gravity&quot;,{_gravityConst:.2,_gy:0,_falling:!0,_anti:null,init:function(){this.requires(&quot;2D&quot;)},gravity:function(t){return t&amp;&amp;(this._anti=t),isNaN(this._jumpSpeed)&amp;&amp;(this._jumpSpeed=0),this.bind(&quot;EnterFrame&quot;,this._enterFrame),this},gravityConst:function(t){return this._gravityConst=t,this},_enterFrame:function(){this._falling?(this._gy+=this._gravityConst,this.y+=this._gy,this.trigger(&quot;Moved&quot;,{x:this._x,y:this._y-this._gy})):this._gy=0;var t,i,n,r=!1,s=this.pos(),o=0;for(s._y++,s.x=s._x,s.y=s._y,s.w=s._w,s.h=s._h,i=e.map.search(s),n=i.length;n&gt;o;++o)if(t=i[o],t!==this&amp;&amp;t.has(this._anti)&amp;&amp;t.intersect(s)){r=t;break}r?this._falling&amp;&amp;(this._gy&gt;this._jumpSpeed||!this._up)&amp;&amp;this.stopFalling(r):this._falling=!0},stopFalling:function(t){t&amp;&amp;(this.y=t._y-this._h),this._falling=!1,this._up&amp;&amp;(this._up=!1),this.trigger(&quot;hit&quot;)},antigravity:function(){this.unbind(&quot;EnterFrame&quot;,this._enterFrame)}}),e.polygon=function(t){arguments.length&gt;1&amp;&amp;(t=Array.prototype.slice.call(arguments,0)),this.points=t},e.polygon.prototype={containsPoint:function(t,e){var i,n,r=this.points,s=!1;for(i=0,n=r.length-1;r.length&gt;i;n=i++)r[i][1]&gt;e!=r[n][1]&gt;e&amp;&amp;(r[n][0]-r[i][0])*(e-r[i][1])/(r[n][1]-r[i][1])+r[i][0]&gt;t&amp;&amp;(s=!s);return s},shift:function(t,e){for(var i,n=0,r=this.points.length;r&gt;n;n++)i=this.points[n],i[0]+=t,i[1]+=e},rotate:function(t){for(var e,i,n,r=0,s=this.points.length;s&gt;r;r++)e=this.points[r],i=t.o.x+(e[0]-t.o.x)*t.cos+(e[1]-t.o.y)*t.sin,n=t.o.y-(e[0]-t.o.x)*t.sin+(e[1]-t.o.y)*t.cos,e[0]=i,e[1]=n}},e.circle=function(t,e,i){this.x=t,this.y=e,this.radius=i,this.points=[];for(var n,r=0;8&gt;r;r++)n=r*Math.PI/4,this.points[r]=[this.x+Math.sin(n)*i,this.y+Math.cos(n)*i]},e.circle.prototype={containsPoint:function(t,e){var i=this.radius,n=(Math.sqrt,this.x-t),r=this.y-e;return i*i&gt;n*n+r*r},shift:function(t,e){this.x+=t,this.y+=e;for(var i,n=0,r=this.points.length;r&gt;n;n++)i=this.points[n],i[0]+=t,i[1]+=e},rotate:function(){}},e.matrix=function(t){this.mtx=t,this.width=t[0].length,this.height=t.length},e.matrix.prototype={x:function(t){if(this.width==t.height){for(var i=[],n=0;this.height&gt;n;n++){i[n]=[];for(var r=0;t.width&gt;r;r++){for(var s=0,o=0;this.width&gt;o;o++)s+=this.mtx[n][o]*t.mtx[o][r];i[n][r]=s}}return new e.matrix(i)}},e:function(t,e){return 1&gt;t||t&gt;this.mtx.length||1&gt;e||e&gt;this.mtx[0].length?null:this.mtx[t-1][e-1]}}},{&quot;./HashMap.js&quot;:4,&quot;./core.js&quot;:9}],2:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.c(&quot;DOM&quot;,{_element:null,_cssStyles:null,avoidCss3dTransforms:!1,init:function(){function t(){var t=0,e=this.__c,i=&quot;&quot;;for(t in e)i+=&quot; &quot;+t;i=i.substr(1),this._element.className=i}function n(t){var e=0,i=this.__c,n=&quot;&quot;;for(e in i)e!=t&amp;&amp;(n+=&quot; &quot;+e);n=n.substr(1),this._element.className=n}this._cssStyles={visibility:&quot;&quot;,left:&quot;&quot;,top:&quot;&quot;,width:&quot;&quot;,height:&quot;&quot;,zIndex:&quot;&quot;,opacity:&quot;&quot;,transformOrigin:&quot;&quot;,transform:&quot;&quot;},this._element=i.createElement(&quot;div&quot;),e.stage.inner.appendChild(this._element),this._element.style.position=&quot;absolute&quot;,this._element.id=&quot;ent&quot;+this[0],this.bind(&quot;Invalidate&quot;,function(){this._changed||(this._changed=!0,e.DrawManager.addDom(this))}),this.bind(&quot;NewComponent&quot;,t).bind(&quot;RemoveComponent&quot;,n),this.bind(&quot;Remove&quot;,this.undraw),this.bind(&quot;RemoveComponent&quot;,function(t){&quot;DOM&quot;===t&amp;&amp;this.undraw()})},getDomId:function(){return this._element.id},DOM:function(t){return t&amp;&amp;t.nodeType&amp;&amp;(this.undraw(),this._element=t,this._element.style.position=&quot;absolute&quot;),this},draw:function(){var t=this._element.style,i=this.__coord||[0,0,0,0],n={x:i[0],y:i[1],w:i[2],h:i[3]},r=e.support.prefix,s=[];if(this._cssStyles.visibility!==this._visible&amp;&amp;(this._cssStyles.visibility=this._visible,t.visibility=this._visible?&quot;visible&quot;:&quot;hidden&quot;),e.support.css3dtransform&amp;&amp;!this.avoidCss3dTransforms?s.push(&quot;translate3d(&quot;+~~this._x+&quot;px,&quot;+~~this._y+&quot;px,0)&quot;):(this._cssStyles.left!==this._x&amp;&amp;(this._cssStyles.left=this._x,t.left=~~this._x+&quot;px&quot;),this._cssStyles.top!==this._y&amp;&amp;(this._cssStyles.top=this._y,t.top=~~this._y+&quot;px&quot;)),this._cssStyles.width!==this._w&amp;&amp;(this._cssStyles.width=this._w,t.width=~~this._w+&quot;px&quot;),this._cssStyles.height!==this._h&amp;&amp;(this._cssStyles.height=this._h,t.height=~~this._h+&quot;px&quot;),this._cssStyles.zIndex!==this._z&amp;&amp;(this._cssStyles.zIndex=this._z,t.zIndex=this._z),this._cssStyles.opacity!==this._alpha&amp;&amp;(this._cssStyles.opacity=this._alpha,t.opacity=this._alpha,t[r+&quot;Opacity&quot;]=this._alpha),this._mbr){var o=this._origin.x+&quot;px &quot;+this._origin.y+&quot;px&quot;;t.transformOrigin=o,t[r+&quot;TransformOrigin&quot;]=o,e.support.css3dtransform?s.push(&quot;rotateZ(&quot;+this._rotation+&quot;deg)&quot;):s.push(&quot;rotate(&quot;+this._rotation+&quot;deg)&quot;)}return this._flipX&amp;&amp;s.push(&quot;scaleX(-1)&quot;),this._flipY&amp;&amp;s.push(&quot;scaleY(-1)&quot;),this._cssStyles.transform!=s.join(&quot; &quot;)&amp;&amp;(this._cssStyles.transform=s.join(&quot; &quot;),t.transform=this._cssStyles.transform,t[r+&quot;Transform&quot;]=this._cssStyles.transform),this.trigger(&quot;Draw&quot;,{style:t,type:&quot;DOM&quot;,co:n}),this},undraw:function(){return this._element&amp;&amp;e.stage.inner.removeChild(this._element),this},css:function(t,i){var n,r,s=this._element,o=s.style;if(&quot;object&quot;==typeof t)for(n in t)t.hasOwnProperty(n)&amp;&amp;(r=t[n],&quot;number&quot;==typeof r&amp;&amp;(r+=&quot;px&quot;),o[e.DOM.camelize(n)]=r);else{if(!i)return e.DOM.getStyle(s,t);&quot;number&quot;==typeof i&amp;&amp;(i+=&quot;px&quot;),o[e.DOM.camelize(t)]=i}return this.trigger(&quot;Invalidate&quot;),this}}),e.extend({DOM:{window:{init:function(){this.width=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,this.height=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,e.uniqueBind(&quot;RenderScene&quot;,e.DrawManager.renderDOM),e.uniqueBind(&quot;ViewportResize&quot;,this._resize)},_resize:function(){e.stage.elem.style.width=e.viewport.width+&quot;px&quot;,e.stage.elem.style.height=e.viewport.height+&quot;px&quot;},width:0,height:0},inner:function(t){var e=t.getBoundingClientRect(),n=e.left+(window.pageXOffset?window.pageXOffset:i.body.scrollLeft),r=e.top+(window.pageYOffset?window.pageYOffset:i.body.scrollTop),s=parseInt(this.getStyle(t,&quot;border-left-width&quot;)||0,10)||parseInt(this.getStyle(t,&quot;borderLeftWidth&quot;)||0,10)||0,o=parseInt(this.getStyle(t,&quot;border-top-width&quot;)||0,10)||parseInt(this.getStyle(t,&quot;borderTopWidth&quot;)||0,10)||0;return n+=s,r+=o,{x:n,y:r}},getStyle:function(t,e){var n;return t.currentStyle?n=t.currentStyle[this.camelize(e)]:window.getComputedStyle&amp;&amp;(n=i.defaultView.getComputedStyle(t,null).getPropertyValue(this.csselize(e))),n},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():&quot;&quot;})},csselize:function(t){return t.replace(/[A-Z]/g,function(t){return t?&quot;-&quot;+t.toLowerCase():&quot;&quot;})},translate:function(t,n){var r=i.documentElement,s=i.body;return{x:(t-e.stage.x+(r&amp;&amp;r.scrollLeft||s&amp;&amp;s.scrollLeft||0))/e.viewport._scale-e.viewport._x,y:(n-e.stage.y+(r&amp;&amp;r.scrollTop||s&amp;&amp;s.scrollTop||0))/e.viewport._scale-e.viewport._y}}}})},{&quot;./core.js&quot;:9}],3:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.c(&quot;DebugCanvas&quot;,{init:function(){this.requires(&quot;2D&quot;),e.DebugCanvas.context||e.DebugCanvas.init(),e.DebugCanvas.add(this),this._debug={alpha:1,lineWidth:1},this.bind(&quot;RemoveComponent&quot;,this.onDebugRemove),this.bind(&quot;Remove&quot;,this.onDebugDestroy)},onDebugRemove:function(t){&quot;DebugCanvas&quot;===t&amp;&amp;e.DebugCanvas.remove(this)},onDebugDestroy:function(){e.DebugCanvas.remove(this)},debugAlpha:function(t){return this._debug.alpha=t,this},debugFill:function(t){return t===void 0&amp;&amp;(t=&quot;red&quot;),this._debug.fillStyle=t,this},debugStroke:function(t){return t===void 0&amp;&amp;(t=&quot;red&quot;),this._debug.strokeStyle=t,this},debugDraw:function(t){var e=t.globalAlpha,i=this._debug;i.alpha&amp;&amp;(t.globalAlpha=this._debug.alpha),i.strokeStyle&amp;&amp;(t.strokeStyle=i.strokeStyle),i.lineWidth&amp;&amp;(t.lineWidth=i.lineWidth),i.fillStyle&amp;&amp;(t.fillStyle=i.fillStyle),this.trigger(&quot;DebugDraw&quot;),t.globalAlpha=e}}),e.c(&quot;DebugRectangle&quot;,{init:function(){this.requires(&quot;2D, DebugCanvas&quot;)},debugRectangle:function(t){return this.debugRect=t,this.unbind(&quot;DebugDraw&quot;,this.drawDebugRect),this.bind(&quot;DebugDraw&quot;,this.drawDebugRect),this},drawDebugRect:function(){ctx=e.DebugCanvas.context;var t=this.debugRect;null!==t&amp;&amp;void 0!==t&amp;&amp;t._h&amp;&amp;t._w&amp;&amp;(this._debug.fillStyle&amp;&amp;ctx.fillRect(t._x,t._y,t._w,t._h),this._debug.strokeStyle&amp;&amp;ctx.strokeRect(t._x,t._y,t._w,t._h))}}),e.c(&quot;VisibleMBR&quot;,{init:function(){this.requires(&quot;DebugRectangle&quot;).debugFill(&quot;purple&quot;).bind(&quot;EnterFrame&quot;,this._assignRect)},_assignRect:function(){this._mbr?this.debugRectangle(this._mbr):this.debugRectangle(this)}}),e.c(&quot;DebugPolygon&quot;,{init:function(){this.requires(&quot;2D, DebugCanvas&quot;)},debugPolygon:function(t){return this.polygon=t,this.unbind(&quot;DebugDraw&quot;,this.drawDebugPolygon),this.bind(&quot;DebugDraw&quot;,this.drawDebugPolygon),this},drawDebugPolygon:function(){if(void 0!==this.polygon){ctx=e.DebugCanvas.context,ctx.beginPath();for(var t in this.polygon.points)ctx.lineTo(this.polygon.points[t][0],this.polygon.points[t][1]);ctx.closePath(),this._debug.fillStyle&amp;&amp;ctx.fill(),this._debug.strokeStyle&amp;&amp;ctx.stroke()}}}),e.c(&quot;WiredHitBox&quot;,{init:function(){this.requires(&quot;DebugPolygon&quot;).debugStroke(&quot;red&quot;).matchHitBox(),this.bind(&quot;NewHitbox&quot;,this.matchHitBox)},matchHitBox:function(){this.debugPolygon(this.map)}}),e.c(&quot;SolidHitBox&quot;,{init:function(){this.requires(&quot;Collision, DebugPolygon&quot;).debugFill(&quot;orange&quot;).debugAlpha(.7).matchHitBox(),this.bind(&quot;NewHitbox&quot;,this.matchHitBox)},matchHitBox:function(){this.debugPolygon(this.map)}}),e.DebugCanvas={context:null,entities:[],onetimeEntities:[],add:function(t){this.entities.push(t)},remove:function(t){for(var e=this.entities,i=e.length-1;i&gt;=0;i--)e[i]==t&amp;&amp;e.splice(i,1)},init:function(){if(!e.DebugCanvas.context){if(!e.support.canvas)return e.trigger(&quot;NoCanvas&quot;),e.stop(),void 0;var t;t=i.createElement(&quot;canvas&quot;),t.width=e.viewport.width,t.height=e.viewport.height,t.style.position=&quot;absolute&quot;,t.style.left=&quot;0px&quot;,t.style.top=&quot;0px&quot;,t.id=&quot;debug-canvas&quot;,t.style.zIndex=1e5,e.stage.elem.appendChild(t),e.DebugCanvas.context=t.getContext(&quot;2d&quot;),e.DebugCanvas._canvas=t}e.unbind(&quot;RenderScene&quot;,e.DebugCanvas.renderScene),e.bind(&quot;RenderScene&quot;,e.DebugCanvas.renderScene)},renderScene:function(t){t=t||e.viewport.rect();var i,n=e.DebugCanvas.entities,r=0,s=n.length,o=e.DebugCanvas.context,a=e.viewport;for(o.setTransform(a._scale,0,0,a._scale,a._x,a._y),o.clearRect(t._x,t._y,t._w,t._h);s&gt;r;r++)i=n[r],i.debugDraw(o)}}},{&quot;./core.js&quot;:9}],4:[function(t,e){function i(t,e,i){this.keys=t,this.map=i,this.obj=e}t(&quot;./core.js&quot;),window.document;var n,r=function(t){n=t||64,this.map={}},s=&quot; &quot;,o={};r.prototype={insert:function(t){var e,n,s=r.key(t),o=new i(s,t,this),a=0;for(a=s.x1;s.x2&gt;=a;a++)for(e=s.y1;s.y2&gt;=e;e++)n=a&lt;&lt;16^e,this.map[n]||(this.map[n]=[]),this.map[n].push(t);return o},search:function(t,e){var i,n,s,a=r.key(t,o),h=[];for(void 0===e&amp;&amp;(e=!0),i=a.x1;a.x2&gt;=i;i++)for(n=a.y1;a.y2&gt;=n;n++)if(cell=this.map[i&lt;&lt;16^n])for(s=0;cell.length&gt;s;s++)h.push(cell[s]);if(e){var c,u,_=[],d={};for(i=0,l=h.length;l&gt;i;i++)c=h[i],c&amp;&amp;(u=c[0],c=c._mbr||c,!d[u]&amp;&amp;c._x&lt;t._x+t._w&amp;&amp;c._x+c._w&gt;t._x&amp;&amp;c._y&lt;t._y+t._h&amp;&amp;c._h+c._y&gt;t._y&amp;&amp;(d[u]=h[i]));for(c in d)_.push(d[c]);return _}return h},remove:function(t,e){var i,n,s=0;for(1==arguments.length&amp;&amp;(e=t,t=r.key(e,o)),s=t.x1;t.x2&gt;=s;s++)for(i=t.y1;t.y2&gt;=i;i++)if(n=s&lt;&lt;16^i,this.map[n]){var a,h=this.map[n],c=h.length;for(a=0;c&gt;a;a++)h[a]&amp;&amp;h[a][0]===e[0]&amp;&amp;h.splice(a,1)}},refresh:function(t){var e,i,n,s,o,a=t.keys,h=t.obj;for(i=a.x1;a.x2&gt;=i;i++)for(n=a.y1;a.y2&gt;=n;n++)if(e=this.map[i&lt;&lt;16^n])for(o=e.length,s=0;o&gt;s;s++)e[s]&amp;&amp;e[s][0]===h[0]&amp;&amp;e.splice(s,1);for(r.key(h,a),i=a.x1;a.x2&gt;=i;i++)for(n=a.y1;a.y2&gt;=n;n++)e=this.map[i&lt;&lt;16^n],e||(e=this.map[i&lt;&lt;16^n]=[]),e.push(h);return t},boundaries:function(){var t,e,i={max:{x:-1/0,y:-1/0},min:{x:1/0,y:1/0}},n={max:{x:-1/0,y:-1/0},min:{x:1/0,y:1/0}};for(var r in this.map)if(this.map[r].length){var s=r&gt;&gt;16,o=r&lt;&lt;16&gt;&gt;16;if(0&gt;o&amp;&amp;(s=-1^s),s&gt;=i.max.x){i.max.x=s;for(t in this.map[r])e=this.map[r][t],&quot;object&quot;==typeof e&amp;&amp;&quot;requires&quot;in e&amp;&amp;(n.max.x=Math.max(n.max.x,e.x+e.w))}if(i.min.x&gt;=s){i.min.x=s;for(t in this.map[r])e=this.map[r][t],&quot;object&quot;==typeof e&amp;&amp;&quot;requires&quot;in e&amp;&amp;(n.min.x=Math.min(n.min.x,e.x))}if(o&gt;=i.max.y){i.max.y=o;for(t in this.map[r])e=this.map[r][t],&quot;object&quot;==typeof e&amp;&amp;&quot;requires&quot;in e&amp;&amp;(n.max.y=Math.max(n.max.y,e.y+e.h))}if(i.min.y&gt;=o){i.min.y=o;for(t in this.map[r])e=this.map[r][t],&quot;object&quot;==typeof e&amp;&amp;&quot;requires&quot;in e&amp;&amp;(n.min.y=Math.min(n.min.y,e.y))}}return n}},r.key=function(t,e){return t._mbr&amp;&amp;(t=t._mbr),e||(e={}),e.x1=Math.floor(t._x/n),e.y1=Math.floor(t._y/n),e.x2=Math.floor((t._w+t._x)/n),e.y2=Math.floor((t._h+t._y)/n),e},r.hash=function(t){return t.x1+s+t.y1+s+t.x2+s+t.y2},i.prototype={update:function(t){r.hash(r.key(t,o))!=r.hash(this.keys)&amp;&amp;this.map.refresh(this)}},e.exports=r},{&quot;./core.js&quot;:9}],5:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.easing=function(t){this.timePerFrame=1e3/e.timer.FPS(),this.duration=t,this.reset()},e.easing.prototype={duration:0,clock:0,steps:null,complete:!1,paused:!1,reset:function(){this.loops=1,this.clock=0,this.complete=!1,this.paused=!1},repeat:function(t){this.loops=t},setProgress:function(t,e){this.clock=this.duration*t,e!==void 0&amp;&amp;(this.loops=e)},pause:function(){this.paused=!0},resume:function(){this.paused=!1,this.complete=!1},tick:function(t){if(!this.paused&amp;&amp;!this.complete)for(this.clock+=t,this.frames=Math.floor(this.clock/this.timePerFrame);this.clock&gt;=this.duration&amp;&amp;this.complete===!1;)this.loops--,this.loops&gt;0?this.clock-=this.duration:this.complete=!0},time:function(){return Math.min(this.clock/this.duration,1)},value:function(){return this.time()}},e.c(&quot;Tween&quot;,{init:function(){this.tweenGroup={},this.tweenStart={},this.tweens=[],this.bind(&quot;EnterFrame&quot;,this._tweenTick)},_tweenTick:function(t){var e,i,n;for(n=this.tweens.length-1;n&gt;=0;n--)e=this.tweens[n],e.easing.tick(t.dt),i=e.easing.value(),this._doTween(e.props,i),e.easing.complete&amp;&amp;(this.tweens.splice(n,1),this._endTween(e.props))},_doTween:function(t,e){for(var i in t)this[i]=(1-e)*this.tweenStart[i]+e*t[i]},tween:function(t,i){var n={props:t,easing:new e.easing(i)};for(var r in t)this.tweenGroup[r]!==void 0&amp;&amp;this.cancelTween(r),this.tweenStart[r]=this[r],this.tweenGroup[r]=t;return this.tweens.push(n),this},cancelTween:function(t){if(&quot;string&quot;==typeof t)&quot;object&quot;==typeof this.tweenGroup[t]&amp;&amp;delete this.tweenGroup[t][t];else if(&quot;object&quot;==typeof t)for(var e in t)this.cancelTween(e);return this},_endTween:function(t){for(var e in t)delete this.tweenGroup[e];this.trigger(&quot;TweenEnd&quot;,t)}})},{&quot;./core.js&quot;:9}],6:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.c(&quot;Canvas&quot;,{init:function(){e.canvas.context||e.canvas.init(),e.DrawManager.total2D++,this.currentRect={},this._changed=!0,e.DrawManager.addCanvas(this),this.bind(&quot;Invalidate&quot;,function(){this._changed===!1&amp;&amp;(this._changed=!0,e.DrawManager.addCanvas(this))}),this.bind(&quot;Remove&quot;,function(){e.DrawManager.total2D--,this._changed=!0,e.DrawManager.addCanvas(this)})},drawVars:{type:&quot;canvas&quot;,pos:{},ctx:null,coord:[0,0,0,0],co:{x:0,y:0,w:0,h:0}},draw:function(t,i,n,r,s){if(this.ready){4===arguments.length&amp;&amp;(s=r,r=n,n=i,i=t,t=e.canvas.context);var o=this.drawVars.pos;o._x=this._x+(i||0),o._y=this._y+(n||0),o._w=r||this._w,o._h=s||this._h,context=t||e.canvas.context,coord=this.__coord||[0,0,0,0];var a=this.drawVars.co;a.x=coord[0]+(i||0),a.y=coord[1]+(n||0),a.w=r||coord[2],a.h=s||coord[3],0!==this._rotation&amp;&amp;(context.save(),context.translate(this._origin.x+this._x,this._origin.y+this._y),o._x=-this._origin.x,o._y=-this._origin.y,context.rotate(this._rotation%360*(Math.PI/180))),(this._flipX||this._flipY)&amp;&amp;(context.save(),context.scale(this._flipX?-1:1,this._flipY?-1:1),this._flipX&amp;&amp;(o._x=-(o._x+o._w)),this._flipY&amp;&amp;(o._y=-(o._y+o._h)));var h;return 1&gt;this._alpha&amp;&amp;(h=context.globalAlpha,context.globalAlpha=this._alpha),this.drawVars.ctx=context,this.trigger(&quot;Draw&quot;,this.drawVars),(0!==this._rotation||this._flipX||this._flipY)&amp;&amp;context.restore(),h&amp;&amp;(context.globalAlpha=h),this}}}),e.extend({canvas:{context:null,init:function(){if(!e.support.canvas)return e.trigger(&quot;NoCanvas&quot;),e.stop(),void 0;var t;t=i.createElement(&quot;canvas&quot;),t.width=e.viewport.width,t.height=e.viewport.height,t.style.position=&quot;absolute&quot;,t.style.left=&quot;0px&quot;,t.style.top=&quot;0px&quot;,e.stage.elem.appendChild(t),e.canvas.context=t.getContext(&quot;2d&quot;),e.canvas._canvas=t;var n=e.viewport._scale;1!=n&amp;&amp;e.canvas.context.scale(n,n),e.uniqueBind(&quot;RenderScene&quot;,e.DrawManager.renderCanvas),e.uniqueBind(&quot;ViewportResize&quot;,this._resize)},_resize:function(){var t=e.canvas._canvas;t.width=e.viewport.width,t.height=e.viewport.height}}})},{&quot;./core.js&quot;:9}],7:[function(t){var e=t(&quot;./core.js&quot;),i=(window.document,Math.PI/180);e.c(&quot;Collision&quot;,{init:function(){this.requires(&quot;2D&quot;),this.collision()},remove:function(){this._cbr=null,this.unbind(&quot;Resize&quot;,this._resizeMap),this.unbind(&quot;Resize&quot;,this._checkBounds)},collision:function(t){if(this.unbind(&quot;Resize&quot;,this._resizeMap),this.unbind(&quot;Resize&quot;,this._checkBounds),t){if(arguments.length&gt;1){var n=Array.prototype.slice.call(arguments,0);t=new e.polygon(n)}this._findBounds(t.points)}else t=new e.polygon([0,0],[this._w,0],[this._w,this._h],[0,this._h]),this.bind(&quot;Resize&quot;,this._resizeMap),this._cbr=null;return this.rotation&amp;&amp;t.rotate({cos:Math.cos(-this.rotation*i),sin:Math.sin(-this.rotation*i),o:{x:this._origin.x,y:this._origin.y}}),this.map=t,this.attach(this.map),this.map.shift(this._x,this._y),this.trigger(&quot;NewHitbox&quot;,t),this},_findBounds:function(t){for(var e,i=1/0,n=-1/0,r=1/0,s=-1/0,o=0;t.length&gt;o;++o)e=t[o],i&gt;e[0]&amp;&amp;(i=e[0]),e[0]&gt;n&amp;&amp;(n=e[0]),r&gt;e[1]&amp;&amp;(r=e[1]),e[1]&gt;s&amp;&amp;(s=e[1]);var a={cx:(i+n)/2,cy:(r+s)/2,r:Math.sqrt((n-i)*(n-i)+(s-r)*(s-r))/2};return i&gt;=0&amp;&amp;r&gt;=0&amp;&amp;(this._checkBounds=function(){null===this._cbr&amp;&amp;n&gt;this._w||s&gt;this._h?(this._cbr=a,this._calculateMBR()):this._cbr&amp;&amp;(this._cbr=null,this._calculateMBR())},this.bind(&quot;Resize&quot;,this._checkBounds)),i&gt;=0&amp;&amp;r&gt;=0&amp;&amp;this._w&gt;=n&amp;&amp;this._h&gt;=s?(this._cbr=null,!1):(this._cbr=a,this._calculateMBR(),!0)},_resizeMap:function(t){var e,n,r=this.rotation*i,s=this.map.points;&quot;w&quot;===t.axis?(r?(e=t.amount*Math.cos(r),n=t.amount*Math.sin(r)):(e=t.amount,n=0),s[1][0]+=e,s[1][1]+=n):(r?(n=t.amount*Math.cos(r),e=-t.amount*Math.sin(r)):(e=0,n=t.amount),s[3][0]+=e,s[3][1]+=n),s[2][0]+=e,s[2][1]+=n},hit:function(t){var i,n,r,s,o=this._cbr||this._mbr||this,a=e.map.search(o,!1),h=0,c=a.length,u={},l=&quot;map&quot;in this&amp;&amp;&quot;containsPoint&quot;in this.map,_=[];if(!c)return!1;for(;c&gt;h;++h)n=a[h],r=n._cbr||n._mbr||n,n&amp;&amp;(i=n[0],!u[i]&amp;&amp;this[0]!==i&amp;&amp;n.__c[t]&amp;&amp;r._x&lt;o._x+o._w&amp;&amp;r._x+r._w&gt;o._x&amp;&amp;r._y&lt;o._y+o._h&amp;&amp;r._h+r._y&gt;o._y&amp;&amp;(u[i]=n));for(s in u)if(n=u[s],l&amp;&amp;&quot;map&quot;in n){var d=this._SAT(this.map,n.map);d.obj=n,d.type=&quot;SAT&quot;,d&amp;&amp;_.push(d)}else _.push({obj:n,type:&quot;MBR&quot;});return _.length?_:!1},onHit:function(t,e,i){var n=!1;return this.bind(&quot;EnterFrame&quot;,function(){var r=this.hit(t);r?(n=!0,e.call(this,r)):n&amp;&amp;(&quot;function&quot;==typeof i&amp;&amp;i.call(this),n=!1)}),this},_SAT:function(t,e){for(var i,n,r,s,o,a,h,c,u,l,_=t.points,d=e.points,f=0,p=_.length,g=d.length,m={x:0,y:0},v=null,y=null,w=null;p&gt;f;f++){for(u=_[f==p-1?0:f+1],l=_[f],m.x=-(u[1]-l[1]),m.y=u[0]-l[0],n=Math.sqrt(m.x*m.x+m.y*m.y),m.x/=n,m.y/=n,r=s=-1,o=a=-1,i=0;p&gt;i;++i)c=_[i][0]*m.x+_[i][1]*m.y,(c&gt;o||-1===o)&amp;&amp;(o=c),(r&gt;c||-1===r)&amp;&amp;(r=c);for(i=0;g&gt;i;++i)c=d[i][0]*m.x+d[i][1]*m.y,(c&gt;a||-1===a)&amp;&amp;(a=c),(s&gt;c||-1===s)&amp;&amp;(s=c);if(s&gt;r?(h=s-o,m.x=-m.x,m.y=-m.y):h=r-a,h&gt;=0)return!1;(null===v||h&gt;v)&amp;&amp;(v=h,w={x:m.x,y:m.y})}for(f=0;g&gt;f;f++){for(u=d[f==g-1?0:f+1],l=d[f],m.x=-(u[1]-l[1]),m.y=u[0]-l[0],n=Math.sqrt(m.x*m.x+m.y*m.y),m.x/=n,m.y/=n,r=s=-1,o=a=-1,i=0;p&gt;i;++i)c=_[i][0]*m.x+_[i][1]*m.y,(c&gt;o||-1===o)&amp;&amp;(o=c),(r&gt;c||-1===r)&amp;&amp;(r=c);for(i=0;g&gt;i;++i)c=d[i][0]*m.x+d[i][1]*m.y,(c&gt;a||-1===a)&amp;&amp;(a=c),(s&gt;c||-1===s)&amp;&amp;(s=c);if(s&gt;r?(h=s-o,m.x=-m.x,m.y=-m.y):h=r-a,h&gt;=0)return!1;(null===v||h&gt;v)&amp;&amp;(v=h),(h&gt;y||null===y)&amp;&amp;(y=h,w={x:m.x,y:m.y})}return{overlap:y,normal:w}}})},{&quot;./core.js&quot;:9}],8:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.extend({over:null,mouseObjs:0,mousePos:{},lastEvent:null,keydown:{},selected:!1,detectBlur:function(t){var i=t.clientX&gt;e.stage.x&amp;&amp;t.clientX&lt;e.stage.x+e.viewport.width&amp;&amp;t.clientY&gt;e.stage.y&amp;&amp;t.clientY&lt;e.stage.y+e.viewport.height;!e.selected&amp;&amp;i&amp;&amp;e.trigger(&quot;CraftyFocus&quot;),e.selected&amp;&amp;!i&amp;&amp;e.trigger(&quot;CraftyBlur&quot;),e.selected=i},mouseDispatch:function(t){if(e.mouseObjs){e.lastEvent=t;var i,n,r,s,o,a=-1,h=0,c=e.DOM.translate(t.clientX,t.clientY),u={},l=t.target?t.target:t.srcElement,_=t.type;if(t.mouseButton=t.which===void 0?2&gt;t.button?e.mouseButtons.LEFT:4==t.button?e.mouseButtons.MIDDLE:e.mouseButtons.RIGHT:2&gt;t.which?e.mouseButtons.LEFT:2==t.which?e.mouseButtons.MIDDLE:e.mouseButtons.RIGHT,t.realX=s=e.mousePos.x=c.x,t.realY=o=e.mousePos.y=c.y,&quot;CANVAS&quot;!=l.nodeName){for(;&quot;string&quot;!=typeof l.id&amp;&amp;-1==l.id.indexOf(&quot;ent&quot;);)l=l.parentNode;ent=e(parseInt(l.id.replace(&quot;ent&quot;,&quot;&quot;),10)),ent.has(&quot;Mouse&quot;)&amp;&amp;ent.isAt(s,o)&amp;&amp;(i=ent)}if(!i)for(n=e.map.search({_x:s,_y:o,_w:1,_h:1},!1),r=n.length;r&gt;h;++h)if(n[h].__c.Mouse&amp;&amp;n[h]._visible){var d=n[h],f=!1;if(!u[d[0]]&amp;&amp;(u[d[0]]=!0,d.mapArea?d.mapArea.containsPoint(s,o)&amp;&amp;(f=!0):d.isAt(s,o)&amp;&amp;(f=!0),f&amp;&amp;(d._z&gt;=a||-1===a))){if(d._z===a&amp;&amp;d[0]&lt;i[0])continue;a=d._z,i=d}}i?&quot;mousedown&quot;===_?i.trigger(&quot;MouseDown&quot;,t):&quot;mouseup&quot;===_?i.trigger(&quot;MouseUp&quot;,t):&quot;dblclick&quot;==_?i.trigger(&quot;DoubleClick&quot;,t):&quot;click&quot;==_?i.trigger(&quot;Click&quot;,t):&quot;mousemove&quot;===_?(i.trigger(&quot;MouseMove&quot;,t),this.over!==i&amp;&amp;(this.over&amp;&amp;(this.over.trigger(&quot;MouseOut&quot;,t),this.over=null),this.over=i,i.trigger(&quot;MouseOver&quot;,t))):i.trigger(_,t):(&quot;mousemove&quot;===_&amp;&amp;this.over&amp;&amp;(this.over.trigger(&quot;MouseOut&quot;,t),this.over=null),&quot;mousedown&quot;===_?e.viewport.mouselook(&quot;start&quot;,t):&quot;mousemove&quot;===_?e.viewport.mouselook(&quot;drag&quot;,t):&quot;mouseup&quot;==_&amp;&amp;e.viewport.mouselook(&quot;stop&quot;)),&quot;mousemove&quot;===_&amp;&amp;(this.lastEvent=t)}},touchDispatch:function(t){var n,r=e.lastEvent;&quot;touchstart&quot;===t.type?n=&quot;mousedown&quot;:&quot;touchmove&quot;===t.type?n=&quot;mousemove&quot;:&quot;touchend&quot;===t.type?n=&quot;mouseup&quot;:&quot;touchcancel&quot;===t.type?n=&quot;mouseup&quot;:&quot;touchleave&quot;===t.type&amp;&amp;(n=&quot;mouseup&quot;),t.touches&amp;&amp;t.touches.length?first=t.touches[0]:t.changedTouches&amp;&amp;t.changedTouches.length&amp;&amp;(first=t.changedTouches[0]);var s=i.createEvent(&quot;MouseEvent&quot;);s.initMouseEvent(n,!0,!0,window,1,first.screenX,first.screenY,first.clientX,first.clientY,!1,!1,!1,!1,0,t.relatedTarget),first.target.dispatchEvent(s),null!==r&amp;&amp;&quot;mousedown&quot;==r.type&amp;&amp;&quot;mouseup&quot;==n&amp;&amp;(n=&quot;click&quot;,s=i.createEvent(&quot;MouseEvent&quot;),s.initMouseEvent(n,!0,!0,window,1,first.screenX,first.screenY,first.clientX,first.clientY,!1,!1,!1,!1,0,t.relatedTarget),first.target.dispatchEvent(s)),t.target&amp;&amp;&quot;INPUT&quot;!==t.target.nodeName&amp;&amp;&quot;TEXTAREA&quot;!==t.target.nodeName&amp;&amp;(t.preventDefault?t.preventDefault():t.returnValue=!1)},keyboardDispatch:function(t){for(var i=t,n={},r=&quot;char charCode keyCode type shiftKey ctrlKey metaKey timestamp&quot;.split(&quot; &quot;),s=r.length;s;){var o=r[--s];n[o]=i[o]}return n.which=null!==i.charCode?i.charCode:i.keyCode,n.key=i.keyCode||i.which,n.originalEvent=i,t=n,&quot;keydown&quot;===t.type?e.keydown[t.key]!==!0&amp;&amp;(e.keydown[t.key]=!0,e.trigger(&quot;KeyDown&quot;,t)):&quot;keyup&quot;===t.type&amp;&amp;(delete e.keydown[t.key],e.trigger(&quot;KeyUp&quot;,t)),!e.selected||8==t.key||t.key&gt;=112&amp;&amp;135&gt;=t.key?void 0:(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target&amp;&amp;&quot;INPUT&quot;!==t.target.nodeName&amp;&amp;&quot;TEXTAREA&quot;!==t.target.nodeName&amp;&amp;(t.preventDefault?t.preventDefault():t.returnValue=!1),!1)}}),e.bind(&quot;Load&quot;,function(){e.addEvent(this,&quot;keydown&quot;,e.keyboardDispatch),e.addEvent(this,&quot;keyup&quot;,e.keyboardDispatch),e.addEvent(this,e.stage.elem,&quot;mousedown&quot;,e.mouseDispatch),e.addEvent(this,e.stage.elem,&quot;mouseup&quot;,e.mouseDispatch),e.addEvent(this,i.body,&quot;mouseup&quot;,e.detectBlur),e.addEvent(this,e.stage.elem,&quot;mousemove&quot;,e.mouseDispatch),e.addEvent(this,e.stage.elem,&quot;click&quot;,e.mouseDispatch),e.addEvent(this,e.stage.elem,&quot;dblclick&quot;,e.mouseDispatch),e.addEvent(this,e.stage.elem,&quot;touchstart&quot;,e.touchDispatch),e.addEvent(this,e.stage.elem,&quot;touchmove&quot;,e.touchDispatch),e.addEvent(this,e.stage.elem,&quot;touchend&quot;,e.touchDispatch),e.addEvent(this,e.stage.elem,&quot;touchcancel&quot;,e.touchDispatch),e.addEvent(this,e.stage.elem,&quot;touchleave&quot;,e.touchDispatch)</div><div class='line' id='LC10'>}),e.bind(&quot;CraftyStop&quot;,function(){e.removeEvent(this,&quot;keydown&quot;,e.keyboardDispatch),e.removeEvent(this,&quot;keyup&quot;,e.keyboardDispatch),e.stage&amp;&amp;(e.removeEvent(this,e.stage.elem,&quot;mousedown&quot;,e.mouseDispatch),e.removeEvent(this,e.stage.elem,&quot;mouseup&quot;,e.mouseDispatch),e.removeEvent(this,e.stage.elem,&quot;mousemove&quot;,e.mouseDispatch),e.removeEvent(this,e.stage.elem,&quot;click&quot;,e.mouseDispatch),e.removeEvent(this,e.stage.elem,&quot;dblclick&quot;,e.mouseDispatch),e.removeEvent(this,e.stage.elem,&quot;touchstart&quot;,e.touchDispatch),e.removeEvent(this,e.stage.elem,&quot;touchmove&quot;,e.touchDispatch),e.removeEvent(this,e.stage.elem,&quot;touchend&quot;,e.touchDispatch),e.removeEvent(this,e.stage.elem,&quot;touchcancel&quot;,e.touchDispatch),e.removeEvent(this,e.stage.elem,&quot;touchleave&quot;,e.touchDispatch)),e.removeEvent(this,i.body,&quot;mouseup&quot;,e.detectBlur)}),e.c(&quot;Mouse&quot;,{init:function(){e.mouseObjs++,this.bind(&quot;Remove&quot;,function(){e.mouseObjs--})},areaMap:function(t){if(arguments.length&gt;1){var i=Array.prototype.slice.call(arguments,0);t=new e.polygon(i)}return t.shift(this._x,this._y),this.mapArea=t,this.attach(this.mapArea),this}}),e.c(&quot;Draggable&quot;,{_origMouseDOMPos:null,_oldX:null,_oldY:null,_dragging:!1,_dir:null,init:function(){this.requires(&quot;Mouse&quot;),this.enableDrag()},_ondrag:function(t){var i=e.DOM.translate(t.clientX,t.clientY);if(0===i.x||0===i.y)return!1;if(this._dir){var n=(i.x-this._origMouseDOMPos.x)*this._dir.x+(i.y-this._origMouseDOMPos.y)*this._dir.y;this.x=this._oldX+n*this._dir.x,this.y=this._oldY+n*this._dir.y}else this.x=this._oldX+(i.x-this._origMouseDOMPos.x),this.y=this._oldY+(i.y-this._origMouseDOMPos.y);this.trigger(&quot;Dragging&quot;,t)},_ondown:function(t){t.mouseButton===e.mouseButtons.LEFT&amp;&amp;this._startDrag(t)},_onup:function(t){this._dragging===!0&amp;&amp;(e.removeEvent(this,e.stage.elem,&quot;mousemove&quot;,this._ondrag),e.removeEvent(this,e.stage.elem,&quot;mouseup&quot;,this._onup),this._dragging=!1,this.trigger(&quot;StopDrag&quot;,t))},dragDirection:function(t){if(t===void 0)this._dir=null;else if(&quot;&quot;+parseInt(t,10)==t)this._dir={x:Math.cos(t/180*Math.PI),y:Math.sin(t/180*Math.PI)};else{var e=Math.sqrt(t.x*t.x+t.y*t.y);this._dir={x:t.x/e,y:t.y/e}}},_startDrag:function(t){this._origMouseDOMPos=e.DOM.translate(t.clientX,t.clientY),this._oldX=this._x,this._oldY=this._y,this._dragging=!0,e.addEvent(this,e.stage.elem,&quot;mousemove&quot;,this._ondrag),e.addEvent(this,e.stage.elem,&quot;mouseup&quot;,this._onup),this.trigger(&quot;StartDrag&quot;,t)},stopDrag:function(){return e.removeEvent(this,e.stage.elem,&quot;mousemove&quot;,this._ondrag),e.removeEvent(this,e.stage.elem,&quot;mouseup&quot;,this._onup),this._dragging=!1,this.trigger(&quot;StopDrag&quot;),this},startDrag:function(){return this._dragging||this._startDrag(e.lastEvent),this},enableDrag:function(){return this.bind(&quot;MouseDown&quot;,this._ondown),e.addEvent(this,e.stage.elem,&quot;mouseup&quot;,this._onup),this},disableDrag:function(){return this.unbind(&quot;MouseDown&quot;,this._ondown),this._dragging&amp;&amp;this.stopDrag(),this}}),e.c(&quot;Keyboard&quot;,{isDown:function(t){return&quot;string&quot;==typeof t&amp;&amp;(t=e.keys[t]),!!e.keydown[t]}}),e.c(&quot;Multiway&quot;,{_speed:3,_keydown:function(t){this._keys[t.key]&amp;&amp;(this._movement.x=Math.round(1e3*(this._movement.x+this._keys[t.key].x))/1e3,this._movement.y=Math.round(1e3*(this._movement.y+this._keys[t.key].y))/1e3,this.trigger(&quot;NewDirection&quot;,this._movement))},_keyup:function(t){this._keys[t.key]&amp;&amp;(this._movement.x=Math.round(1e3*(this._movement.x-this._keys[t.key].x))/1e3,this._movement.y=Math.round(1e3*(this._movement.y-this._keys[t.key].y))/1e3,this.trigger(&quot;NewDirection&quot;,this._movement))},_enterframe:function(){this.disableControls||(0!==this._movement.x&amp;&amp;(this.x+=this._movement.x,this.trigger(&quot;Moved&quot;,{x:this.x-this._movement.x,y:this.y})),0!==this._movement.y&amp;&amp;(this.y+=this._movement.y,this.trigger(&quot;Moved&quot;,{x:this.x,y:this.y-this._movement.y})))},_initializeControl:function(){return this.unbind(&quot;KeyDown&quot;,this._keydown).unbind(&quot;KeyUp&quot;,this._keyup).unbind(&quot;EnterFrame&quot;,this._enterframe).bind(&quot;KeyDown&quot;,this._keydown).bind(&quot;KeyUp&quot;,this._keyup).bind(&quot;EnterFrame&quot;,this._enterframe)},multiway:function(t,i){this._keyDirection={},this._keys={},this._movement={x:0,y:0},this._speed={x:3,y:3},i?void 0!==t.x&amp;&amp;void 0!==t.y?(this._speed.x=t.x,this._speed.y=t.y):(this._speed.x=t,this._speed.y=t):i=t,this._keyDirection=i,this.speed(this._speed),this._initializeControl();for(var n in i)e.keydown[e.keys[n]]&amp;&amp;this.trigger(&quot;KeyDown&quot;,{key:e.keys[n]});return this},enableControl:function(){return this.disableControls=!1,this},disableControl:function(){return this.disableControls=!0,this},speed:function(t){for(var i in this._keyDirection){var n=e.keys[i]||i;this._keys[n]={x:Math.round(1e3*Math.cos(this._keyDirection[i]*(Math.PI/180))*t.x)/1e3,y:Math.round(1e3*Math.sin(this._keyDirection[i]*(Math.PI/180))*t.y)/1e3}}return this}}),e.c(&quot;Fourway&quot;,{init:function(){this.requires(&quot;Multiway&quot;)},fourway:function(t){return this.multiway(t,{UP_ARROW:-90,DOWN_ARROW:90,RIGHT_ARROW:0,LEFT_ARROW:180,W:-90,S:90,D:0,A:180,Z:-90,Q:180}),this}}),e.c(&quot;Twoway&quot;,{_speed:3,_up:!1,init:function(){this.requires(&quot;Fourway, Keyboard, Gravity&quot;)},twoway:function(t,i){return this.multiway(t,{RIGHT_ARROW:0,LEFT_ARROW:180,D:0,A:180,Q:180}),t&amp;&amp;(this._speed=t),this._jumpSpeed=2&gt;arguments.length?2*this._speed:i,this.bind(&quot;EnterFrame&quot;,function(){this.disableControls||this._up&amp;&amp;(this.y-=this._jumpSpeed,this._falling=!0,this.trigger(&quot;Moved&quot;,{x:this._x,y:this._y+this._jumpSpeed}))}).bind(&quot;KeyDown&quot;,function(t){this._falling||t.key!==e.keys.UP_ARROW&amp;&amp;t.key!==e.keys.W&amp;&amp;t.key!==e.keys.Z||(this._up=!0)}),this}})},{&quot;./core.js&quot;:9}],9:[function(t,e){function i(){var t=r++;return t in a?i():t}function n(t){if(null===t||&quot;object&quot;!=typeof t)return t;var e=t.constructor();for(var i in t)e[i]=n(t[i]);return e}var r,s,o,a,h,c,u,l,_,d=t(&quot;./version&quot;),f=function(t){return new f.fn.init(t)};initState=function(){r=1,s=0,o={},a={},h={},c=[],u=Array.prototype.slice,l=/\s*,\s*/,_=/\s+/},initState(),f.fn=f.prototype={init:function(t){if(&quot;string&quot;!=typeof t)return t||(t=0,t in a||(a[t]=this)),t in a?(this[0]=t,this.length=1,this.__c||(this.__c={}),a[t]||(a[t]=this),a[t]):(this.length=0,this);var e,i,n,r,s,h,c,u=0,d=!1,f=!1;if(&quot;*&quot;===t){h=0;for(e in a)this[h]=+e,h++;return this.length=h,1===h?a[this[0]]:this}-1!==t.indexOf(&quot;,&quot;)?(f=!0,n=l):-1!==t.indexOf(&quot; &quot;)&amp;&amp;(d=!0,n=_);for(e in a)if(a.hasOwnProperty(e))if(i=a[e],d||f){for(r=t.split(n),h=0,c=r.length,s=0;c&gt;h;h++)i.__c[r[h]]&amp;&amp;s++;(d&amp;&amp;s===c||f&amp;&amp;s&gt;0)&amp;&amp;(this[u++]=+e)}else i.__c[t]&amp;&amp;(this[u++]=+e);if(u&gt;0&amp;&amp;!d&amp;&amp;!f&amp;&amp;this.extend(o[t]),r&amp;&amp;d)for(h=0;c&gt;h;h++)this.extend(o[r[h]]);return this.length=u,1===u?a[this[u-1]]:this},setName:function(t){var e=t+&quot;&quot;;return this._entityName=e,this.trigger(&quot;NewEntityName&quot;,e),this},addComponent:function(t){var e,i,n,r,s=[],a=0,h=0;if(arguments.length&gt;1)for(i=arguments.length;i&gt;h;h++)s.push(arguments[h]);else if(-1!==t.indexOf(&quot;,&quot;))for(n=t.split(l),i=n.length;i&gt;h;h++)s.push(n[h]);else s.push(t);for(e=s.length;e&gt;a;a++)this.__c[s[a]]!==!0&amp;&amp;(this.__c[s[a]]=!0,r=o[s[a]],this.extend(r),r&amp;&amp;&quot;init&quot;in r&amp;&amp;r.init.call(this));return this.trigger(&quot;NewComponent&quot;,s),this},toggleComponent:function(t){var e,i,n=0;if(arguments.length&gt;1)for(e=arguments.length;e&gt;n;n++)this.has(arguments[n])?this.removeComponent(arguments[n]):this.addComponent(arguments[n]);else if(-1!==t.indexOf(&quot;,&quot;))for(i=t.split(l),e=i.length;e&gt;n;n++)this.has(i[n])?this.removeComponent(i[n]):this.addComponent(i[n]);else this.has(t)?this.removeComponent(t):this.addComponent(t);return this},requires:function(t){return this.addComponent(t)},removeComponent:function(t,e){var i=o[t];if(this.trigger(&quot;RemoveComponent&quot;,t),i&amp;&amp;&quot;remove&quot;in i&amp;&amp;i.remove.call(this,!1),e===!1&amp;&amp;i)for(var n in i)delete this[n];return delete this.__c[t],this},getId:function(){return this[0]},has:function(t){return!!this.__c[t]},attr:function(t,e){if(1===arguments.length)return&quot;string&quot;==typeof t?this[t]:(this.extend(t),this.trigger(&quot;Change&quot;,t),this);this[t]=e;var i={};return i[t]=e,this.trigger(&quot;Change&quot;,i),this},toArray:function(){return u.call(this,0)},timeout:function(t,e){return this.each(function(){var i=this;setTimeout(function(){t.call(i)},e)}),this},bind:function(t,e){if(1===this.length){h[t]||(h[t]={});var i=h[t];return i[this[0]]||(i[this[0]]=[]),i[this[0]].push(e),this}return this.each(function(){h[t]||(h[t]={});var i=h[t];i[this[0]]||(i[this[0]]=[]),i[this[0]].push(e)}),this},uniqueBind:function(t,e){this.unbind(t,e),this.bind(t,e)},one:function(t,e){var i=this,n=function(r){e.call(i,r),i.unbind(t,n)};return i.bind(t,n)},unbind:function(t,e){return this.each(function(){var i,n,r=h[t],s=0;if(!r||!r[this[0]])return this;if(i=r[this[0]].length,!e)return delete r[this[0]],this;for(;i&gt;s;s++)n=r[this[0]],n[s]==e&amp;&amp;delete n[s]}),this},trigger:function(t,e){if(1===this.length){if(h[t]&amp;&amp;h[t][this[0]]){var i,n=h[t][this[0]];for(i=0;n.length&gt;i;i++)n[i]===void 0?(n.splice(i,1),i--):n[i].call(this,e)}return this}return this.each(function(){if(h[t]&amp;&amp;h[t][this[0]]){var i,n=h[t][this[0]];for(i=0;n.length&gt;i;i++)n[i]===void 0?(n.splice(i,1),i--):n[i].call(this,e)}}),this},each:function(t){for(var e=0,i=this.length;i&gt;e;e++)a[this[e]]&amp;&amp;t.call(a[this[e]],e);return this},get:function(t){var e=this.length;if(t!==void 0)return t&gt;=e||0&gt;t+e?void 0:t&gt;=0?a[this[t]]:a[this[t+e]];for(var i=0,n=[];e&gt;i;i++)a[this[i]]&amp;&amp;n.push(a[this[i]]);return n},clone:function(){var t,e,i=this.__c,n=f.e();for(t in i)n.addComponent(t);for(e in this)&quot;0&quot;!=e&amp;&amp;&quot;_global&quot;!=e&amp;&amp;&quot;_changed&quot;!=e&amp;&amp;&quot;function&quot;!=typeof this[e]&amp;&amp;&quot;object&quot;!=typeof this[e]&amp;&amp;(n[e]=this[e]);return n},setter:function(t,e){return f.support.setter?this.__defineSetter__(t,e):f.support.defineProperty&amp;&amp;Object.defineProperty(this,t,{set:e,configurable:!0}),this},destroy:function(){this.each(function(){var t;this.trigger(&quot;Remove&quot;);for(var e in this.__c)t=o[e],t&amp;&amp;&quot;remove&quot;in t&amp;&amp;t.remove.call(this,!0);for(var i in h)this.unbind(i);delete a[this[0]]})}},f.fn.init.prototype=f.fn,f.extend=f.fn.extend=function(t){var e,i=this;if(!t)return i;for(e in t)i!==t[e]&amp;&amp;(i[e]=t[e]);return i},f.extend({init:function(t,e,i){return f.viewport.init(t,e,i),this.trigger(&quot;Load&quot;),this.timer.init(),this},getVersion:function(){return d},stop:function(t){if(this.timer.stop(),t){if(f.audio.remove(),f.stage&amp;&amp;f.stage.elem.parentNode){var e=document.createElement(&quot;div&quot;);e.id=f.stage.elem.id,f.stage.elem.parentNode.replaceChild(e,f.stage.elem)}initState()}return f.trigger(&quot;CraftyStop&quot;),this},pause:function(t){return(1===arguments.length?t:!this._paused)?(this.trigger(&quot;Pause&quot;),this._paused=!0,setTimeout(function(){f.timer.stop()},0),f.keydown={}):(this.trigger(&quot;Unpause&quot;),this._paused=!1,setTimeout(function(){f.timer.init()},0)),this},isPaused:function(){return this._paused},timer:function(){var t,e,i,n=&quot;fixed&quot;,r=5,o=40,a=0,h=0,c=50,u=1e3/c;return{init:function(){i===void 0&amp;&amp;(i=(new Date).getTime()-u);var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;n?(t=function(){f.timer.step(),e=n(t)},t()):t=setInterval(function(){f.timer.step()},1e3/c)},stop:function(){f.trigger(&quot;CraftyStopTimer&quot;),&quot;number&quot;==typeof t&amp;&amp;clearInterval(t);var i=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||null;i&amp;&amp;i(e),t=null},steptype:function(t,e){if(&quot;variable&quot;===t||&quot;semifixed&quot;===t)n=t,e&amp;&amp;(o=e);else{if(&quot;fixed&quot;!==t)throw&quot;Invalid step type specified&quot;;n=&quot;fixed&quot;,e&amp;&amp;(r=e)}},step:function(){var t,e,c,l=0;if(currentTime=(new Date).getTime(),a&gt;0&amp;&amp;f.trigger(&quot;MeasureWaitTime&quot;,currentTime-a),i+h&gt;=currentTime)return a=currentTime,void 0;var _=currentTime-(i+h);_&gt;20*u&amp;&amp;(h+=_-u,_=u),&quot;fixed&quot;===n?(l=Math.ceil(_/u),l=Math.min(l,r),e=u):&quot;variable&quot;===n?(l=1,e=_,e=Math.min(e,o)):&quot;semifixed&quot;===n&amp;&amp;(l=Math.ceil(_/o),e=_/l);for(var d=0;l&gt;d;d++)c=currentTime,f.trigger(&quot;EnterFrame&quot;,{frame:s++,dt:e,gameTime:i}),i+=e,currentTime=(new Date).getTime(),f.trigger(&quot;MeasureFrameTime&quot;,currentTime-c);l&gt;0&amp;&amp;(t=currentTime,f.trigger(&quot;RenderScene&quot;),f.trigger(&quot;PostRender&quot;),currentTime=(new Date).getTime(),f.trigger(&quot;MeasureRenderTime&quot;,currentTime-t)),a=currentTime},FPS:function(t){return t===void 0?c:(c=t,u=1e3/c,void 0)},simulateFrames:function(t,e){for(e===void 0&amp;&amp;(e=u);t--&gt;0;)f.trigger(&quot;EnterFrame&quot;,{frame:s++,dt:e});f.trigger(&quot;RenderScene&quot;)}}}(),e:function(){var t,e=i();return a[e]=null,a[e]=t=f(e),arguments.length&gt;0&amp;&amp;t.addComponent.apply(t,arguments),t.setName(&quot;Entity #&quot;+e),t.addComponent(&quot;obj&quot;),f.trigger(&quot;NewEntity&quot;,{id:e}),t},c:function(t,e){o[t]=e},trigger:function(t,e){var i,n,r,s,o=h[t];for(i in o)if(o.hasOwnProperty(i)&amp;&amp;(r=o[i],r&amp;&amp;0!==r.length))for(s=a[i]?f(+i):f,n=0;r.length&gt;n;n++)r[n]===void 0?(r.splice(n,1),n--):r[n].call(s,e)},bind:function(t,e){h[t]||(h[t]={});var i=h[t];return i.global||(i.global=[]),i.global.push(e),e},uniqueBind:function(t,e){return this.unbind(t,e),this.bind(t,e)},one:function(t,e){var i=this,n=function(r){e.call(i,r),i.unbind(t,n)};return i.bind(t,n)},unbind:function(t,e){var i,n,r,s,o=h[t];if(void 0===o||void 0===o.global||0===o.global.length)return!1;if(1===arguments.length)return delete o.global,!0;for(r=o.global,s=!1,i=0,n=r.length;n&gt;i;i++)r[i]===e&amp;&amp;(s=!0,delete r[i]);return s},frame:function(){return s},components:function(){return o},isComp:function(t){return t in o},debug:function(t){return&quot;handlers&quot;===t?h:a},settings:function(){var t={},e={};return{register:function(t,i){e[t]=i},modify:function(i,n){e[i]&amp;&amp;(e[i].call(t[i],n),t[i]=n)},get:function(e){return t[e]}}}(),clone:n}),&quot;function&quot;==typeof define&amp;&amp;define(&quot;crafty&quot;,[],function(){return f}),e.exports=f,window.Crafty=f},{&quot;./version&quot;:28}],10:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({device:{_deviceOrientationCallback:!1,_deviceMotionCallback:!1,_normalizeDeviceOrientation:function(t){var i;window.DeviceOrientationEvent?i={tiltLR:t.gamma,tiltFB:t.beta,dir:t.alpha,motUD:null}:window.OrientationEvent&amp;&amp;(i={tiltLR:90*t.x,tiltFB:-90*t.y,dir:null,motUD:t.z}),e.device._deviceOrientationCallback(i)},_normalizeDeviceMotion:function(t){var i=t.accelerationIncludingGravity,n=i.z&gt;0?1:-1,r={acceleration:i,rawAcceleration:&quot;[&quot;+Math.round(i.x)+&quot;, &quot;+Math.round(i.y)+&quot;, &quot;+Math.round(i.z)+&quot;]&quot;,facingUp:n,tiltLR:Math.round(-90*(i.x/9.81)),tiltFB:Math.round(90*((i.y+9.81)/9.81)*n)};e.device._deviceMotionCallback(r)},deviceOrientation:function(t){this._deviceOrientationCallback=t,e.support.deviceorientation&amp;&amp;(window.DeviceOrientationEvent?e.addEvent(this,window,&quot;deviceorientation&quot;,this._normalizeDeviceOrientation):window.OrientationEvent&amp;&amp;e.addEvent(this,window,&quot;MozOrientation&quot;,this._normalizeDeviceOrientation))},deviceMotion:function(t){this._deviceMotionCallback=t,e.support.devicemotion&amp;&amp;window.DeviceMotionEvent&amp;&amp;e.addEvent(this,window,&quot;devicemotion&quot;,this._normalizeDeviceMotion)}}})},{&quot;./core.js&quot;:9}],11:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({diamondIso:{_tile:{width:0,height:0,r:0},_map:{width:0,height:0,x:0,y:0},_origin:{x:0,y:0},init:function(t,e,i,n){return this._tile.width=parseInt(t,10),this._tile.height=parseInt(e,10)||parseInt(t,10)/2,this._tile.r=this._tile.width/this._tile.height,this._map.width=parseInt(i,10),this._map.height=parseInt(n,10)||parseInt(i,10),this._origin.x=this._map.height*this._tile.width/2,this},place:function(t,e,i,n){var r=this.pos2px(e,i);n||(n=1);var s=0,o=0;void 0!==t.__margin&amp;&amp;(s=t.__margin[0],o=t.__margin[1]),t.x=r.left+s,t.y=r.top+o-t.h,t.z=r.top*n},centerAt:function(t,i){var n=this.pos2px(t,i);e.viewport.x=-n.left+e.viewport.width/2-this._tile.width,e.viewport.y=-n.top+e.viewport.height/2},area:function(t){t||(t=0);var i=e.viewport.rect(),n=i._x,r=i._y,s=i._w,o=i._h,a=t*this._tile.width,h=t*this._tile.height;n-=this._tile.width/2+a,r-=this._tile.height/2+h,s+=this._tile.width/2+a,o+=this._tile.height/2+h;var c=[];for(yl=r+o;yl&gt;r;r+=this._tile.height/2)for(xl=n+s;xl&gt;n;n+=this._tile.width/2){var u=this.px2pos(n,r);c.push([~~u.x,~~u.y])}return c},pos2px:function(t,e){return{left:(t-e)*this._tile.width/2+this._origin.x,top:(t+e)*this._tile.height/2}},px2pos:function(t,e){var i=(t-this._origin.x)/this._tile.r;return{x:(e+i)/this._tile.height,y:(e-i)/this._tile.height}},polygon:function(t){t.requires(&quot;Collision&quot;);var i=0,n=0;void 0!==t.__margin&amp;&amp;(i=t.__margin[0],n=t.__margin[1]);var r=[[i-0,t.h-n-this._tile.height/2],[i-this._tile.width/2,t.h-n-0],[i-this._tile.width,t.h-n-this._tile.height/2],[i-this._tile.width/2,t.h-n-this._tile.height]],s=new e.polygon(r);return s}}})},{&quot;./core.js&quot;:9}],12:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.c(&quot;Color&quot;,{_color:&quot;&quot;,ready:!0,init:function(){this.bind(&quot;Draw&quot;,function(t){&quot;DOM&quot;===t.type?(t.style.backgroundColor=this._color,t.style.lineHeight=0):&quot;canvas&quot;===t.type&amp;&amp;(this._color&amp;&amp;(t.ctx.fillStyle=this._color),t.ctx.fillRect(t.pos._x,t.pos._y,t.pos._w,t.pos._h))})},color:function(t){return t?(this._color=t,this.trigger(&quot;Invalidate&quot;),this):this._color}}),e.c(&quot;Tint&quot;,{_color:null,_strength:1,init:function(){var t=function(t){var i=t.ctx||e.canvas.context;i.fillStyle=this._color||&quot;rgba(0,0,0, 0)&quot;,i.fillRect(t.pos._x,t.pos._y,t.pos._w,t.pos._h)};this.bind(&quot;Draw&quot;,t).bind(&quot;RemoveComponent&quot;,function(e){&quot;Tint&quot;===e&amp;&amp;this.unbind(&quot;Draw&quot;,t)})},tint:function(t,i){return this._strength=i,this._color=e.toRGB(t,this._strength),this.trigger(&quot;Invalidate&quot;),this}}),e.c(&quot;Image&quot;,{_repeat:&quot;repeat&quot;,ready:!1,init:function(){var t=function(t){if(&quot;canvas&quot;===t.type){if(!this.ready||!this._pattern)return;var e=t.ctx;e.fillStyle=this._pattern,e.save(),e.translate(t.pos._x,t.pos._y),e.fillRect(0,0,this._w,this._h),e.restore()}else&quot;DOM&quot;===t.type&amp;&amp;this.__image&amp;&amp;(t.style.backgroundImage=&quot;url(&quot;+this.__image+&quot;)&quot;,t.style.backgroundRepeat=this._repeat)};this.bind(&quot;Draw&quot;,t).bind(&quot;RemoveComponent&quot;,function(e){&quot;Image&quot;===e&amp;&amp;this.unbind(&quot;Draw&quot;,t)})},image:function(t,i){if(this.__image=t,this._repeat=i||&quot;no-repeat&quot;,this.img=e.asset(t),!this.img){this.img=new Image,e.asset(t,this.img),this.img.src=t;var n=this;return this.img.onload=function(){n.has(&quot;Canvas&quot;)&amp;&amp;(n._pattern=e.canvas.context.createPattern(n.img,n._repeat)),n.ready=!0,&quot;no-repeat&quot;===n._repeat&amp;&amp;(n.w=n.img.width,n.h=n.img.height),n.trigger(&quot;Invalidate&quot;)},this}return this.ready=!0,this.has(&quot;Canvas&quot;)&amp;&amp;(this._pattern=e.canvas.context.createPattern(this.img,this._repeat)),&quot;no-repeat&quot;===this._repeat&amp;&amp;(this.w=this.img.width,this.h=this.img.height),this.trigger(&quot;Invalidate&quot;),this}}),e.extend({toRGB:function(t,e){t=&quot;#&quot;===t.charAt(0)?t.substr(1):t;var i,n=[];return n[0]=parseInt(t.substr(0,2),16),n[1]=parseInt(t.substr(2,2),16),n[2]=parseInt(t.substr(4,2),16),i=void 0===e?&quot;rgb(&quot;+n.join(&quot;,&quot;)+&quot;)&quot;:&quot;rgba(&quot;+n.join(&quot;,&quot;)+&quot;,&quot;+e+&quot;)&quot;}}),e.DrawManager=function(){function t(t,e){return t._globalZ-e._globalZ}var i=[],n=[],r=[],s=!1,o={merge:function(t,e,i){return i===void 0&amp;&amp;(i={}),i._h=Math.max(t._y+t._h,e._y+e._h),i._w=Math.max(t._x+t._w,e._x+e._w),i._x=Math.min(t._x,e._x),i._y=Math.min(t._y,e._y),i._w-=i._x,i._h-=i._y,i},clean:function(){var t,e,r;for(r=0,l=n.length;l&gt;r;r++)e=n[r],t=e._mbr||e,e.staleRect===void 0&amp;&amp;(e.staleRect={}),e.staleRect._x=t._x,e.staleRect._y=t._y,e.staleRect._w=t._w,e.staleRect._h=t._h,e._changed=!1;n.length=0,i.length=0},createDirty:function(t){var e=t._mbr||t;if(t.staleRect){if(o.overlap(t.staleRect,e))return o.merge(t.staleRect,e,t.staleRect),i.push(t.staleRect),void 0;i.push(t.staleRect)}t.currentRect._x=e._x,t.currentRect._y=e._y,t.currentRect._w=e._w,t.currentRect._h=e._h,i.push(t.currentRect)},overlap:function(t,e){return t._x&lt;e._x+e._w&amp;&amp;t._y&lt;e._y+e._h&amp;&amp;t._x+t._w&gt;e._x&amp;&amp;t._y+t._h&gt;e._y}};return e.bind(&quot;InvalidateViewport&quot;,function(){s=!0}),e.bind(&quot;PostRender&quot;,function(){s=!1}),{total2D:e(&quot;2D&quot;).length,onScreen:function(t){return e.viewport._x+t._x+t._w&gt;0&amp;&amp;e.viewport._y+t._y+t._h&gt;0&amp;&amp;e.viewport._x+t._x&lt;e.viewport.width&amp;&amp;e.viewport._y+t._y&lt;e.viewport.height},mergeSet:function(t){for(var e=0;t.length-1&gt;e;)o.overlap(t[e],t[e+1])?(o.merge(t[e],t[e+1],t[e]),t.splice(e+1,1),e&gt;0&amp;&amp;e--):e++;return t},addCanvas:function(t){n.push(t)},addDom:function(t){r.push(t)},debug:function(){console.log(n,r)},drawAll:function(i){i=i||e.viewport.rect();var n,r=e.map.search(i),s=0,o=r.length,a=e.canvas.context;for(a.clearRect(i._x,i._y,i._w,i._h),r.sort(t);o&gt;s;s++)n=r[s],n._visible&amp;&amp;n.__c.Canvas&amp;&amp;(n.draw(),n._changed=!1)},boundingRect:function(t){if(t&amp;&amp;t.length){var e,i,n=1,r=t.length,s=t[0];for(s=[s._x,s._y,s._x+s._w,s._y+s._h];r&gt;n;)e=t[n],i=[e._x,e._y,e._x+e._w,e._y+e._h],i[0]&lt;s[0]&amp;&amp;(s[0]=i[0]),i[1]&lt;s[1]&amp;&amp;(s[1]=i[1]),i[2]&gt;s[2]&amp;&amp;(s[2]=i[2]),i[3]&gt;s[3]&amp;&amp;(s[3]=i[3]),n++;return i=s,s={_x:i[0],_y:i[1],_w:i[2]-i[0],_h:i[3]-i[1]}}},renderCanvas:function(){var r=n.length;if(r||s){var a,h,c,u,l,_=0,d=e.canvas.context,f=e.DrawManager;if(s){var p=e.viewport;d.setTransform(p._scale,0,0,p._scale,p._x*p._scale,p._y*p._scale)}if(r/f.total2D&gt;.6||s)return f.drawAll(),o.clean(),void 0;for(_=0;r&gt;_;_++)o.createDirty(n[_]);i=f.mergeSet(i),r=i.length;var g=[],m=[];for(_=0;r&gt;_;++_)if(a=i[_],g.length=0,m.length=0,a){for(a._w=a._x+a._w,a._h=a._y+a._h,a._x=a._x&gt;0?0|a._x:(0|a._x)-1,a._y=a._y&gt;0?0|a._y:(0|a._y)-1,a._w-=a._x,a._h-=a._y,a._w=a._w===(0|a._w)?a._w:(0|a._w)+1,a._h=a._h===(0|a._h)?a._h:(0|a._h)+1,h=e.map.search(a,!1),d.clearRect(a._x,a._y,a._w,a._h),d.save(),d.beginPath(),d.rect(a._x,a._y,a._w,a._h),d.clip(),c=0,u=h.length;u&gt;c;++c)l=h[c],!g[l[0]]&amp;&amp;l._visible&amp;&amp;l.__c.Canvas&amp;&amp;(g[l[0]]=!0,m.push(l));for(m.sort(t),c=0,u=m.length;u&gt;c;++c){l=m[c];var v=l._mbr||l;o.overlap(v,a)&amp;&amp;l.draw(),l._changed=!1}d.closePath(),d.restore()}if(e.DrawManager.debugDirty===!0)for(d.strokeStyle=&quot;red&quot;,_=0,r=i.length;r&gt;_;++_)a=i[_],d.strokeRect(a._x,a._y,a._w,a._h);o.clean()}},renderDOM:function(){if(s){var t=e.stage.inner.style,i=e.viewport;t.transform=t[e.support.prefix+&quot;Transform&quot;]=&quot;scale(&quot;+i._scale+&quot;, &quot;+i._scale+&quot;)&quot;,t.left=i.x*i._scale+&quot;px&quot;,t.top=i.y*i._scale+&quot;px&quot;,t.zIndex=10}if(r.length){for(var n=0,o=r.length;o&gt;n;++n)r[n].draw()._changed=!1;r.length=0}}}}(),e.extend({pixelart:function(t){var i=e.canvas.context;i&amp;&amp;(i.imageSmoothingEnabled=!t,i.mozImageSmoothingEnabled=!t,i.webkitImageSmoothingEnabled=!t,i.oImageSmoothingEnabled=!t,i.msImageSmoothingEnabled=!t);var n=e.stage.inner.style;t?(n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;optimizeSpeed&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;-moz-crisp-edges&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;-o-crisp-edges&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;-webkit-optimize-contrast&quot;,n[e.DOM.camelize(&quot;-ms-interpolation-mode&quot;)]=&quot;nearest-neighbor&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;optimize-contrast&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;pixelated&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;crisp-edges&quot;):(n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;optimizeQuality&quot;,n[e.DOM.camelize(&quot;-ms-interpolation-mode&quot;)]=&quot;bicubic&quot;,n[e.DOM.camelize(&quot;image-rendering&quot;)]=&quot;auto&quot;)}})},{&quot;./core.js&quot;:9}],13:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;(function(){var t=e.support={},n=navigator.userAgent.toLowerCase(),r=/(webkit)[ \/]([\w.]+)/.exec(n)||/(o)pera(?:.*version)?[ \/]([\w.]+)/.exec(n)||/(ms)ie ([\w.]+)/.exec(n)||/(moz)illa(?:.*? rv:([\w.]+))?/.exec(n)||[],s=/iPad|iPod|iPhone|Android|webOS|IEMobile/i.exec(n);if(s&amp;&amp;(e.mobile=s[0]),t.setter=&quot;__defineSetter__&quot;in this&amp;&amp;&quot;__defineGetter__&quot;in this,t.defineProperty=function(){if(!(&quot;defineProperty&quot;in Object))return!1;try{Object.defineProperty({},&quot;x&quot;,{})}catch(t){return!1}return!0}(),t.audio=&quot;Audio&quot;in window,t.prefix=r[1]||r[0],&quot;moz&quot;===t.prefix&amp;&amp;(t.prefix=&quot;Moz&quot;),&quot;o&quot;===t.prefix&amp;&amp;(t.prefix=&quot;O&quot;),r[2]&amp;&amp;(t.versionName=r[2],t.version=+r[2].split(&quot;.&quot;)[0]),t.canvas=&quot;getContext&quot;in i.createElement(&quot;canvas&quot;),t.canvas){var o;try{o=i.createElement(&quot;canvas&quot;).getContext(&quot;experimental-webgl&quot;),o.viewportWidth=t.canvas.width,o.viewportHeight=t.canvas.height}catch(a){}t.webgl=!!o}else t.webgl=!1;t.css3dtransform=i.createElement(&quot;div&quot;).style.Perspective!==void 0||i.createElement(&quot;div&quot;).style[t.prefix+&quot;Perspective&quot;]!==void 0,t.deviceorientation=window.DeviceOrientationEvent!==void 0||window.OrientationEvent!==void 0,t.devicemotion=window.DeviceMotionEvent!==void 0})(),e.extend({_events:{},addEvent:function(t,e,i,n){3===arguments.length&amp;&amp;(n=i,i=e,e=window.document);var r=function(e){e=e||window.event,&quot;function&quot;==typeof n&amp;&amp;n.call(t,e)},s=t[0]||&quot;&quot;;this._events[s+e+i+n]||(this._events[s+e+i+n]=r,e.attachEvent?e.attachEvent(&quot;on&quot;+i,r):e.addEventListener(i,r,!1))},removeEvent:function(t,e,i,n){3===arguments.length&amp;&amp;(n=i,i=e,e=window.document);var r=t[0]||&quot;&quot;,s=this._events[r+e+i+n];s&amp;&amp;(e.detachEvent?e.detachEvent(&quot;on&quot;+i,s):e.removeEventListener(i,s,!1),delete this._events[r+e+i+n])},background:function(t){e.stage.elem.style.background=t}})},{&quot;./core.js&quot;:9}],14:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.c(&quot;HTML&quot;,{inner:&quot;&quot;,init:function(){this.requires(&quot;2D, DOM&quot;)},replace:function(t){return this.inner=t,this._element.innerHTML=t,this},append:function(t){return this.inner+=t,this._element.innerHTML+=t,this},prepend:function(t){return this.inner=t+this.inner,this._element.innerHTML=t+this.inner,this}})},{&quot;./core.js&quot;:9}],15:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e[&quot;import&quot;]=function(t,n){if(&quot;string&quot;!=typeof t){var r,s,o,a,h=0;if(t.n&amp;&amp;&quot;object&quot;==typeof t.n)for(s=t.n.length;s&gt;h;++h)o=t.n[h],a=e.e(o.c),delete o.c,a.attr(o);for(r in t)a=e(r),a.attr(t[r])}else if(levelData)n?e.import(levelData[n]):e.import(levelData);else{var c;c=i.createElement(&quot;script&quot;),c.onload=function(){n?e.import(levelData[n]):e.import(levelData)},c.src=t}}},{&quot;./core.js&quot;:9}],16:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({isometric:{_tile:{width:0,height:0},_elements:{},_pos:{x:0,y:0},_z:0,size:function(t,e){return this._tile.width=t,this._tile.height=e&gt;0?e:t/2,this},place:function(t,i,n,r){var s=this.pos2px(t,i);return s.top-=n*(this._tile.height/2),r.attr({x:s.left+e.viewport._x,y:s.top+e.viewport._y}).z+=n,this},pos2px:function(t,e){return{left:t*this._tile.width+(1&amp;e)*(this._tile.width/2),top:e*this._tile.height/2}},px2pos:function(t,e){return{x:-Math.ceil(-t/this._tile.width-.5*(1&amp;e)),y:2*(e/this._tile.height)}},centerAt:function(t,i){if(&quot;number&quot;==typeof t&amp;&amp;&quot;number&quot;==typeof i){var n=this.pos2px(t,i);return e.viewport._x=-n.left+e.viewport.width/2-this._tile.width/2,e.viewport._y=-n.top+e.viewport.height/2-this._tile.height/2,this}return{top:-e.viewport._y+e.viewport.height/2-this._tile.height/2,left:-e.viewport._x+e.viewport.width/2-this._tile.width/2}},area:function(){var t=this.centerAt(),i=this.px2pos(-t.left+e.viewport.width/2,-t.top+e.viewport.height/2),n=this.px2pos(-t.left-e.viewport.width/2,-t.top-e.viewport.height/2);return{x:{start:i.x,end:n.x},y:{start:i.y,end:n.y}}}}})},{&quot;./core.js&quot;:9}],17:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({keys:{BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,PULT_UP:29460,PULT_DOWN:29461,PULT_LEFT:4,PULT_RIGHT:5},mouseButtons:{LEFT:0,MIDDLE:1,RIGHT:2}})},{&quot;./core.js&quot;:9}],18:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.extend({assets:{},asset:function(t,i){return 1===arguments.length?e.assets[t]:e.assets[t]?void 0:(e.assets[t]=i,this.trigger(&quot;NewAsset&quot;,{key:t,value:i}),i)},image_whitelist:[&quot;jpg&quot;,&quot;jpeg&quot;,&quot;gif&quot;,&quot;png&quot;,&quot;svg&quot;],load:function(t,i,n,r){function s(){var t=this.src;this.removeEventListener&amp;&amp;this.removeEventListener(&quot;canplaythrough&quot;,s,!1),++_,n&amp;&amp;n({loaded:_,total:l,percent:100*(_/l),src:t}),_===l&amp;&amp;i&amp;&amp;i()}function o(){var t=this.src;r&amp;&amp;r({loaded:_,total:l,percent:100*(_/l),src:t}),_++,_===l&amp;&amp;i&amp;&amp;i()}for(var a,h,c=0,u=t.length,l=u,_=0,d=&quot;&quot;;u&gt;c;++c){if(a=t[c],d=a.substr(a.lastIndexOf(&quot;.&quot;)+1,3).toLowerCase(),h=e.asset(a)||null,e.audio.supports(d)){if(!h){var f=a.substr(a.lastIndexOf(&quot;/&quot;)+1).toLowerCase();h=e.audio.create(f,a).obj}h.addEventListener&amp;&amp;h.addEventListener(&quot;canplaythrough&quot;,s,!1)}else{if(!(e.image_whitelist.indexOf(d)&gt;=0)){l--;continue}h||(h=new Image,e.asset(a,h)),h.onload=s,&quot;webkit&quot;===e.support.prefix&amp;&amp;(h.src=&quot;&quot;),h.src=a}h.onerror=o}0===l&amp;&amp;i()},modules:function(t,e,n){2===arguments.length&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;(n=e,e=t,t=&quot;http://cdn.craftycomponents.com&quot;);var r=function(){function t(t,e,i){for(i=0,j=t.length;j&gt;i;++i)if(!e(t[i]))return p;return 1}function e(e,i){t(e,function(t){return!i(t)})}function n(i,o,a){function h(t){return t.call?t():l[t]}function u(){if(!--y){l[v]=1,m&amp;&amp;m();for(var i in d)t(i.split(&quot;|&quot;),h)&amp;&amp;!e(d[i],h)&amp;&amp;(d[i]=[])}}i=i[g]?i:[i];var p=o&amp;&amp;o.call,m=p?o:a,v=p?i.join(&quot;&quot;):o,y=i.length;return setTimeout(function(){e(i,function(t){return f[t]?(v&amp;&amp;(_[v]=1),2==f[t]&amp;&amp;u()):(f[t]=1,v&amp;&amp;(_[v]=1),r(!c.test(t)&amp;&amp;s?s+t+&quot;.js&quot;:t,u),void 0)})},0),n}function r(t,e){var i=a.createElement(&quot;script&quot;),n=p;i.onload=i.onerror=i[w]=function(){i[v]&amp;&amp;!/^c|loade/.test(i[v])||n||(i.onload=i[w]=null,n=1,f[t]=2,e())},i.async=1,i.src=t,h.insertBefore(i,h.firstChild)}var s,o=this,a=i,h=a.getElementsByTagName(&quot;head&quot;)[0],c=/^https?:\/\//,u=o.$script,l={},_={},d={},f={},p=!1,g=&quot;push&quot;,m=&quot;DOMContentLoaded&quot;,v=&quot;readyState&quot;,y=&quot;addEventListener&quot;,w=&quot;onreadystatechange&quot;;return!a[v]&amp;&amp;a[y]&amp;&amp;(a[y](m,function x(){a.removeEventListener(m,x,p),a[v]=&quot;complete&quot;},p),a[v]=&quot;loading&quot;),n.get=r,n.order=function(t,e,i){(function r(s){s=t.shift(),t.length?n(s,r):n(s,e,i)})()},n.path=function(t){s=t},n.ready=function(i,r,s){i=i[g]?i:[i];var o=[];return!e(i,function(t){l[t]||o[g](t)})&amp;&amp;t(i,function(t){return l[t]})?r():!function(t){d[t]=d[t]||[],d[t][g](r),s&amp;&amp;s(o)}(i.join(&quot;|&quot;)),n},n.noConflict=function(){return o.$script=u,this},n}(),s=[],o=/^(https?|file):\/\//;for(var a in e)o.test(a)?s.push(a):s.push(t+&quot;/&quot;+a.toLowerCase()+&quot;-&quot;+e[a].toLowerCase()+&quot;.js&quot;);r(s,function(){n&amp;&amp;n()})}})},{&quot;./core.js&quot;:9}],19:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.math={abs:function(t){return 0&gt;t?-t:t},amountOf:function(t,e,i){return i&gt;e?(t-e)/(i-e):(t-i)/(e-i)},clamp:function(t,e,i){return t&gt;i?i:e&gt;t?e:t},degToRad:function(t){return t*Math.PI/180},distance:function(t,i,n,r){var s=e.math.squaredDistance(t,i,n,r);return Math.sqrt(parseFloat(s))},lerp:function(t,e,i){return t+(e-t)*i},negate:function(t){return t&gt;Math.random()?-1:1},radToDeg:function(t){return 180*t/Math.PI},randomElementOfArray:function(t){return t[Math.floor(t.length*Math.random())]},randomInt:function(t,e){return t+Math.floor((1+e-t)*Math.random())},randomNumber:function(t,e){return t+(e-t)*Math.random()},squaredDistance:function(t,e,i,n){return(t-i)*(t-i)+(e-n)*(e-n)},withinRange:function(t,e,i){return t&gt;=e&amp;&amp;i&gt;=t}},e.math.Vector2D=function(){function t(e,i){if(e instanceof t)this.x=e.x,this.y=e.y;else if(2===arguments.length)this.x=e,this.y=i;else if(arguments.length&gt;0)throw&quot;Unexpected number of arguments for Vector2D()&quot;}return t.prototype.x=0,t.prototype.y=0,t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.angleBetween=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},t.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.prototype.clone=function(){return new t(this)},t.prototype.distance=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},t.prototype.distanceSq=function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},t.prototype.equals=function(e){return e instanceof t&amp;&amp;this.x==e.x&amp;&amp;this.y==e.y},t.prototype.getNormal=function(e){return void 0===e?new t(-this.y,this.x):new t(e.y-this.y,this.x-e.x).normalize()},t.prototype.isZero=function(){return 0===this.x&amp;&amp;0===this.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.magnitudeSq=function(){return this.x*this.x+this.y*this.y</div><div class='line' id='LC11'>},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return 0===t?(this.x=1,this.y=0):(this.x/=t,this.y/=t),this},t.prototype.scale=function(t,e){return void 0===e&amp;&amp;(e=t),this.x*=t,this.y*=e,this},t.prototype.scaleToMagnitude=function(t){var e=t/this.magnitude();return this.x*=e,this.y*=e,this},t.prototype.setValues=function(e,i){return e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i),this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.toString=function(){return&quot;Vector2D(&quot;+this.x+&quot;, &quot;+this.y+&quot;)&quot;},t.prototype.translate=function(t,e){return void 0===e&amp;&amp;(e=t),this.x+=t,this.y+=e,this},t.tripleProduct=function(t,i,n){var r=t.dotProduct(n),s=i.dotProduct(n);return new e.math.Vector2D(i.x*r-t.x*s,i.y*r-t.y*s)},t}(),e.math.Matrix2D=function(){return Matrix2D=function(t,e,i,n,r,s){if(t instanceof Matrix2D)this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f;else if(6===arguments.length)this.a=t,this.b=e,this.c=i,this.d=n,this.e=r,this.f=s;else if(arguments.length&gt;0)throw&quot;Unexpected number of arguments for Matrix2D()&quot;},Matrix2D.prototype.a=1,Matrix2D.prototype.b=0,Matrix2D.prototype.c=0,Matrix2D.prototype.d=1,Matrix2D.prototype.e=0,Matrix2D.prototype.f=0,Matrix2D.prototype.apply=function(t){var e=t.x;return t.x=e*this.a+t.y*this.c+this.e,t.y=e*this.b+t.y*this.d+this.f,t},Matrix2D.prototype.clone=function(){return new Matrix2D(this)},Matrix2D.prototype.combine=function(t){var e=this.a;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,e=this.c,this.c=e*t.a+this.d*t.c,this.d=e*t.b+this.d*t.d,e=this.e,this.e=e*t.a+this.f*t.c+t.e,this.f=e*t.b+this.f*t.d+t.f,this},Matrix2D.prototype.equals=function(t){return t instanceof Matrix2D&amp;&amp;this.a==t.a&amp;&amp;this.b==t.b&amp;&amp;this.c==t.c&amp;&amp;this.d==t.d&amp;&amp;this.e==t.e&amp;&amp;this.f==t.f},Matrix2D.prototype.determinant=function(){return this.a*this.d-this.b*this.c},Matrix2D.prototype.invert=function(){var t=this.determinant();if(0!==t){var e={a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f};this.a=e.d/t,this.b=-e.b/t,this.c=-e.c/t,this.d=e.a/t,this.e=(e.c*e.f-e.e*e.d)/t,this.f=(e.e*e.b-e.a*e.f)/t}return this},Matrix2D.prototype.isIdentity=function(){return 1===this.a&amp;&amp;0===this.b&amp;&amp;0===this.c&amp;&amp;1===this.d&amp;&amp;0===this.e&amp;&amp;0===this.f},Matrix2D.prototype.isInvertible=function(){return 0!==this.determinant()},Matrix2D.prototype.preRotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a;return this.a=e*n-i*this.b,this.b=i*n+e*this.b,n=this.c,this.c=e*n-i*this.d,this.d=i*n+e*this.d,this},Matrix2D.prototype.preScale=function(t,e){return void 0===e&amp;&amp;(e=t),this.a*=t,this.b*=e,this.c*=t,this.d*=e,this},Matrix2D.prototype.preTranslate=function(t,e){return&quot;number&quot;==typeof t?(this.e+=t,this.f+=e):(this.e+=t.x,this.f+=t.y),this},Matrix2D.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a;return this.a=e*n-i*this.b,this.b=i*n+e*this.b,n=this.c,this.c=e*n-i*this.d,this.d=i*n+e*this.d,n=this.e,this.e=e*n-i*this.f,this.f=i*n+e*this.f,this},Matrix2D.prototype.scale=function(t,e){return void 0===e&amp;&amp;(e=t),this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this},Matrix2D.prototype.setValues=function(t,e,i,n,r,s){return t instanceof Matrix2D?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f):(this.a=t,this.b=e,this.c=i,this.d=n,this.e=r,this.f=s),this},Matrix2D.prototype.toString=function(){return&quot;Matrix2D([&quot;+this.a+&quot;, &quot;+this.c+&quot;, &quot;+this.e+&quot;] [&quot;+this.b+&quot;, &quot;+this.d+&quot;, &quot;+this.f+&quot;] [0, 0, 1])&quot;},Matrix2D.prototype.translate=function(t,e){return&quot;number&quot;==typeof t?(this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e):(this.e+=this.a*t.x+this.c*t.y,this.f+=this.b*t.x+this.d*t.y),this},Matrix2D}()},{&quot;./core.js&quot;:9}],20:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.c(&quot;Particles&quot;,{init:function(){this._Particles=e.clone(this._Particles),this._Particles.parentEntity=this},particles:function(t){if(!e.support.canvas||e.deactivateParticles)return this;var n,r,s,o,a;n=i.createElement(&quot;canvas&quot;),n.width=e.viewport.width,n.height=e.viewport.height,n.style.position=&quot;absolute&quot;,n.style.left=&quot;0px&quot;,n.style.top=&quot;0px&quot;,e.stage.elem.appendChild(n),r=n.getContext(&quot;2d&quot;),this._Particles.init(t),this.bind(&quot;Remove&quot;,function(){e.stage.elem.removeChild(n)}).bind(&quot;RemoveComponent&quot;,function(t){&quot;particles&quot;===t&amp;&amp;e.stage.elem.removeChild(n)}),s=this.x+e.viewport.x,o=this.y+e.viewport.y,this._Particles.position=this._Particles.vectorHelpers.create(s,o);var h={x:e.viewport.x,y:e.viewport.y};return this.bind(&quot;EnterFrame&quot;,function(){s=this.x+e.viewport.x,o=this.y+e.viewport.y,this._Particles.viewportDelta={x:e.viewport.x-h.x,y:e.viewport.y-h.y},h={x:e.viewport.x,y:e.viewport.y},this._Particles.position=this._Particles.vectorHelpers.create(s,o),&quot;function&quot;==typeof e.DrawManager.boundingRect?(a=e.DrawManager.boundingRect(this._Particles.register),a&amp;&amp;r.clearRect(a._x,a._y,a._w,a._h)):r.clearRect(0,0,e.viewport.width,e.viewport.height),this._Particles.update(),this._Particles.render(r)}),this},_Particles:{presets:{maxParticles:150,size:18,sizeRandom:4,speed:1,speedRandom:1.2,lifeSpan:29,lifeSpanRandom:7,angle:65,angleRandom:34,startColour:[255,131,0,1],startColourRandom:[48,50,45,0],endColour:[245,35,0,0],endColourRandom:[60,60,60,0],sharpness:20,sharpnessRandom:10,spread:10,duration:-1,fastMode:!1,gravity:{x:0,y:.1},jitter:0,particles:[],active:!0,particleCount:0,elapsedFrames:0,emissionRate:0,emitCounter:0,particleIndex:0},init:function(t){this.position=this.vectorHelpers.create(0,0),t===void 0&amp;&amp;(t={});for(var e in this.presets)this[e]=t[e]!==void 0?t[e]:this.presets[e];this.emissionRate=this.maxParticles/this.lifeSpan,this.positionRandom=this.vectorHelpers.create(this.spread,this.spread)},addParticle:function(){if(this.particleCount==this.maxParticles)return!1;var t=new this.particle(this.vectorHelpers);return this.initParticle(t),this.particles[this.particleCount]=t,this.particleCount++,!0},RANDM1TO1:function(){return 2*Math.random()-1},initParticle:function(t){t.position.x=this.position.x+this.positionRandom.x*this.RANDM1TO1(),t.position.y=this.position.y+this.positionRandom.y*this.RANDM1TO1();var e=(this.angle+this.angleRandom*this.RANDM1TO1())*(Math.PI/180),i=this.vectorHelpers.create(Math.sin(e),-Math.cos(e)),n=this.speed+this.speedRandom*this.RANDM1TO1();t.direction=this.vectorHelpers.multiply(i,n),t.size=this.size+this.sizeRandom*this.RANDM1TO1(),t.size=0&gt;t.size?0:~~t.size,t.timeToLive=this.lifeSpan+this.lifeSpanRandom*this.RANDM1TO1(),t.sharpness=this.sharpness+this.sharpnessRandom*this.RANDM1TO1(),t.sharpness=t.sharpness&gt;100?100:0&gt;t.sharpness?0:t.sharpness,t.sizeSmall=~~(t.size/200*t.sharpness);var r=[this.startColour[0]+this.startColourRandom[0]*this.RANDM1TO1(),this.startColour[1]+this.startColourRandom[1]*this.RANDM1TO1(),this.startColour[2]+this.startColourRandom[2]*this.RANDM1TO1(),this.startColour[3]+this.startColourRandom[3]*this.RANDM1TO1()],s=[this.endColour[0]+this.endColourRandom[0]*this.RANDM1TO1(),this.endColour[1]+this.endColourRandom[1]*this.RANDM1TO1(),this.endColour[2]+this.endColourRandom[2]*this.RANDM1TO1(),this.endColour[3]+this.endColourRandom[3]*this.RANDM1TO1()];t.colour=r,t.deltaColour[0]=(s[0]-r[0])/t.timeToLive,t.deltaColour[1]=(s[1]-r[1])/t.timeToLive,t.deltaColour[2]=(s[2]-r[2])/t.timeToLive,t.deltaColour[3]=(s[3]-r[3])/t.timeToLive},update:function(){if(this.active&amp;&amp;this.emissionRate&gt;0){var t=1/this.emissionRate;for(this.emitCounter++;this.particleCount&lt;this.maxParticles&amp;&amp;this.emitCounter&gt;t;)this.addParticle(),this.emitCounter-=t;this.elapsedFrames++,-1!=this.duration&amp;&amp;this.duration&lt;this.elapsedFrames&amp;&amp;this.stop()}this.particleIndex=0,this.register=[];for(var e;this.particleIndex&lt;this.particleCount;){var i=this.particles[this.particleIndex];if(i.timeToLive&gt;0){i.direction=this.vectorHelpers.add(i.direction,this.gravity),i.position=this.vectorHelpers.add(i.position,i.direction),i.position=this.vectorHelpers.add(i.position,this.viewportDelta),this.jitter&amp;&amp;(i.position.x+=this.jitter*this.RANDM1TO1(),i.position.y+=this.jitter*this.RANDM1TO1()),i.timeToLive--;var n=i.colour[0]+=i.deltaColour[0],r=i.colour[1]+=i.deltaColour[1],s=i.colour[2]+=i.deltaColour[2],o=i.colour[3]+=i.deltaColour[3];e=[],e.push(&quot;rgba(&quot;+(n&gt;255?255:0&gt;n?0:~~n)),e.push(r&gt;255?255:0&gt;r?0:~~r),e.push(s&gt;255?255:0&gt;s?0:~~s),e.push((o&gt;1?1:0&gt;o?0:o.toFixed(2))+&quot;)&quot;),i.drawColour=e.join(&quot;,&quot;),this.fastMode||(e[3]=&quot;0)&quot;,i.drawColourEnd=e.join(&quot;,&quot;)),this.particleIndex++}else this.particleIndex!=this.particleCount-1&amp;&amp;(this.particles[this.particleIndex]=this.particles[this.particleCount-1]),this.particleCount--;var a={};a._x=~~i.position.x,a._y=~~i.position.y,a._w=i.size,a._h=i.size,this.register.push(a)}},stop:function(){this.active=!1,this.elapsedFrames=0,this.emitCounter=0,this.parentEntity.trigger(&quot;ParticleEnd&quot;)},render:function(t){for(var i=0,n=this.particleCount;n&gt;i;i++){var r=this.particles[i],s=r.size,o=s&gt;&gt;1;if(!(0&gt;r.position.x+s||0&gt;r.position.y+s||r.position.x-s&gt;e.viewport.width||r.position.y-s&gt;e.viewport.height)){var a=~~r.position.x,h=~~r.position.y;if(this.fastMode)t.fillStyle=r.drawColour;else{var c=t.createRadialGradient(a+o,h+o,r.sizeSmall,a+o,h+o,o);c.addColorStop(0,r.drawColour),c.addColorStop(.9,r.drawColourEnd),t.fillStyle=c}t.fillRect(a,h,s,s)}}},particle:function(t){this.position=t.create(0,0),this.direction=t.create(0,0),this.size=0,this.sizeSmall=0,this.timeToLive=0,this.colour=[],this.drawColour=&quot;&quot;,this.deltaColour=[],this.sharpness=0},vectorHelpers:{create:function(t,e){return{x:t,y:e}},multiply:function(t,e){return t.x*=e,t.y*=e,t},add:function(t,e){return t.x+=e.x,t.y+=e.y,t}}}})},{&quot;./core.js&quot;:9}],21:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({_scenes:{},_current:null,scene:function(t,i,n){return 1===arguments.length||&quot;function&quot;!=typeof arguments[1]?(e.enterScene(t,arguments[1]),void 0):(e.defineScene(t,i,n),void 0)},defineScene:function(t,e,i){if(&quot;function&quot;!=typeof e)throw&quot;Init function is the wrong type.&quot;;this._scenes[t]={},this._scenes[t].initialize=e,i!==void 0&amp;&amp;(this._scenes[t].uninitialize=i)},enterScene:function(t,i){if(&quot;function&quot;==typeof i)throw&quot;Scene data cannot be a function&quot;;e.trigger(&quot;SceneDestroy&quot;,{newScene:t}),e.viewport.reset(),e(&quot;2D&quot;).each(function(){this.has(&quot;Persist&quot;)||this.destroy()}),null!==this._current&amp;&amp;&quot;uninitialize&quot;in this._scenes[this._current]&amp;&amp;this._scenes[this._current].uninitialize.call(this);var n=this._current;this._current=t,e.trigger(&quot;SceneChange&quot;,{oldScene:n,newScene:t}),this._scenes[t].initialize.call(this,i)}})},{&quot;./core.js&quot;:9}],22:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.extend({audio:{sounds:{},supported:null,codecs:{ogg:&#39;audio/ogg; codecs=&quot;vorbis&quot;&#39;,wav:&#39;audio/wav; codecs=&quot;1&quot;&#39;,webma:&#39;audio/webm; codecs=&quot;vorbis&quot;&#39;,mp3:&#39;audio/mpeg; codecs=&quot;mp3&quot;&#39;,m4a:&#39;audio/mp4; codecs=&quot;mp4a.40.2&quot;&#39;},volume:1,muted:!1,paused:!1,playCheck:null,_canPlay:function(){if(this.supported={},e.support.audio){var t,i=this.audioElement();for(var n in this.codecs)t=i.canPlayType(this.codecs[n]),this.supported[n]=&quot;&quot;!==t&amp;&amp;&quot;no&quot;!==t?!0:!1}},supports:function(t){return null===this.supported&amp;&amp;this._canPlay(),this.supported[t]?!0:!1},audioElement:function(){return&quot;undefined&quot;!=typeof Audio?new Audio(&quot;&quot;):i.createElement(&quot;audio&quot;)},create:function(t,i){var n=i.substr(i.lastIndexOf(&quot;.&quot;)+1).toLowerCase();if(!this.supports(n))return!1;var r=this.audioElement();return r.id=t,r.preload=&quot;auto&quot;,r.volume=e.audio.volume,r.src=i,e.asset(i,r),this.sounds[t]={obj:r,played:0,volume:e.audio.volume},this.sounds[t]},add:function(t,i){if(e.support.audio){var n;if(1===arguments.length&amp;&amp;&quot;object&quot;==typeof t)for(var r in t)for(n in t[r])if(e.audio.create(r,t[r][n]))break;if(&quot;string&quot;==typeof t&amp;&amp;(&quot;string&quot;==typeof i&amp;&amp;e.audio.create(t,i),&quot;object&quot;==typeof i))for(n in i)if(e.audio.create(t,i[n]))break}},play:function(t,i,n){if(0!==i&amp;&amp;e.support.audio&amp;&amp;this.sounds[t]){var r=this.sounds[t],s=this.getOpenChannel();if(!s)return null;s.id=t,s.repeat=i;var o=s.obj;return s.volume=r.volume=r.obj.volume=n||e.audio.volume,o.volume=r.volume,o.src=r.obj.src,this.muted&amp;&amp;(o.volume=0),o.play(),r.played++,s.onEnd=function(){r.played&lt;s.repeat||-1==i?(this.currentTime&amp;&amp;(this.currentTime=0),this.play(),r.played++):(s.active=!1,this.pause(),this.removeEventListener(&quot;ended&quot;,s.onEnd,!0),this.currentTime=0,e.trigger(&quot;SoundComplete&quot;,{id:s.id}))},o.addEventListener(&quot;ended&quot;,s.onEnd,!0),o}},maxChannels:7,setChannels:function(t){this.maxChannels=t,this.channels.length&gt;t&amp;&amp;(this.channels.length=t)},channels:[],getOpenChannel:function(){for(var t=0;this.channels.length&gt;t;t++){var e=this.channels[t];if(e.active===!1||e.obj.ended&amp;&amp;e.repeat&lt;=this.sounds[e.id].played)return e.active=!0,e}if(this.maxChannels&gt;t){var i={obj:this.audioElement(),active:!0,_is:function(t){return this.id===t&amp;&amp;this.active}};return this.channels.push(i),i}return null},remove:function(t){if(e.support.audio){var i;if(t)this.sounds[t]&amp;&amp;(i=this.sounds[t],e.audio.stop(t),delete e.assets[i.obj.src],delete e.audio.sounds[t]);else for(var n in this.sounds)i=this.sounds[n],e.audio.stop(t),delete e.assets[i.obj.src],delete e.audio.sounds[t]}},stop:function(t){if(e.support.audio)for(var i in this.channels)c=this.channels[i],(!t&amp;&amp;c.active||c._is(t))&amp;&amp;(c.active=!1,c.obj.pause())},_mute:function(t){if(e.support.audio){var i;for(var n in this.channels)i=this.channels[n],i.obj.volume=t?0:i.volume;this.muted=t}},toggleMute:function(){this.muted?this._mute(!1):this._mute(!0)},mute:function(){this._mute(!0)},unmute:function(){this._mute(!1)},pause:function(t){if(e.support.audio&amp;&amp;t&amp;&amp;this.sounds[t]){var i;for(var n in this.channels)i=this.channels[n],i._is(t)&amp;&amp;!i.obj.paused&amp;&amp;i.obj.pause()}},unpause:function(t){if(e.support.audio&amp;&amp;t&amp;&amp;this.sounds[t]){var i;for(var n in this.channels)i=this.channels[n],i._is(t)&amp;&amp;i.obj.paused&amp;&amp;i.obj.play()}},togglePause:function(t){if(e.support.audio&amp;&amp;t&amp;&amp;this.sounds[t]){var i;for(var n in this.channels)i=this.channels[n],i._is(t)&amp;&amp;(i.obj.paused?i.obj.play():i.obj.pause())}}}})},{&quot;./core.js&quot;:9}],23:[function(t){var e=t(&quot;./core.js&quot;);t(&quot;./animation.js&quot;),window.document,e.c(&quot;SpriteAnimation&quot;,{_reels:null,_currentReelId:null,_currentReel:null,_isPlaying:!1,animationSpeed:1,init:function(){this._reels={}},reel:function(t,i,n,r,s){if(0===arguments.length)return this._currentReelId;if(1===arguments.length&amp;&amp;&quot;string&quot;==typeof t){if(this._reels[t]===void 0)throw&quot;The specified reel &quot;+t+&quot; is undefined.&quot;;return this.pauseAnimation(),this._currentReelId!==t&amp;&amp;(this._currentReelId=t,this._currentReel=this._reels[t],this._updateSprite(),this.trigger(&quot;ReelChange&quot;,this._currentReel)),this}var o,a;if(o={id:t,frames:[],currentFrame:0,easing:new e.easing(i),defaultLoops:1},o.duration=o.easing.duration,&quot;number&quot;==typeof n)if(a=n,y=r,s&gt;=0)for(;n+s&gt;a;a++)o.frames.push([a,y]);else for(;a&gt;n+s;a--)o.frames.push([a,y]);else{if(3!==arguments.length||&quot;object&quot;!=typeof n)throw&quot;Urecognized arguments. Please see the documentation for &#39;reel(...)&#39;.&quot;;o.frames=n}return this._reels[t]=o,this},animate:function(t,e){&quot;string&quot;==typeof t&amp;&amp;this.reel(t);var i=this._currentReel;if(i===void 0||null===i)throw&quot;No reel is specified, and there is no currently active reel.&quot;;return this.pauseAnimation(),e===void 0&amp;&amp;(e=&quot;number&quot;==typeof t?t:1),i.easing.reset(),this.loops(e),this._setFrame(0),this.bind(&quot;EnterFrame&quot;,this._animationTick),this._isPlaying=!0,this.trigger(&quot;StartAnimation&quot;,i),this},resumeAnimation:function(){return this._isPlaying===!1&amp;&amp;null!==this._currentReel&amp;&amp;(this.bind(&quot;EnterFrame&quot;,this._animationTick),this._isPlaying=!0,this._currentReel.easing.resume(),this.trigger(&quot;StartAnimation&quot;,this._currentReel)),this},pauseAnimation:function(){return this._isPlaying===!0&amp;&amp;(this.unbind(&quot;EnterFrame&quot;,this._animationTick),this._isPlaying=!1,this._reels[this._currentReelId].easing.pause()),this},resetAnimation:function(){var t=this._currentReel;if(null===t)throw&quot;No active reel to reset.&quot;;return this.reelPosition(0),t.easing.repeat(t.defaultLoops),this},loops:function(t){return 0===arguments.length?null!==this._currentReel?this._currentReel.easing.loops:0:(null!==this._currentReel&amp;&amp;(0&gt;t&amp;&amp;(t=1/0),this._currentReel.easing.repeat(t),this._currentReel.defaultLoops=t),this)},reelPosition:function(t){if(null===this._currentReel)throw&quot;No active reel.&quot;;if(0===arguments.length)return this._currentReel.currentFrame;var e,i=this._currentReel.frames.length;if(&quot;end&quot;===t&amp;&amp;(t=i-1),1&gt;t&amp;&amp;t&gt;0)e=t,t=Math.floor(i*e);else{if(t!==Math.floor(t))throw&quot;Position &quot;+t+&quot; is invalid.&quot;;0&gt;t&amp;&amp;(t=i-1+t),e=t/i}return t=Math.min(t,i-1),t=Math.max(t,0),this._setProgress(e),this._setFrame(t),this},_animationTick:function(t){var e=this._reels[this._currentReelId];e.easing.tick(t.dt*this.animationSpeed);var i=e.easing.value(),n=Math.min(Math.floor(e.frames.length*i),e.frames.length-1);this._setFrame(n),e.easing.complete===!0&amp;&amp;(this.trigger(&quot;AnimationEnd&quot;,this._currentReel),this.pauseAnimation())},_setFrame:function(t){var e=this._currentReel;t!==e.currentFrame&amp;&amp;(e.currentFrame=t,this._updateSprite(),this.trigger(&quot;FrameChange&quot;,e))},_updateSprite:function(){var t=this._currentReel,e=t.frames[t.currentFrame];this.sprite(e[0],e[1])},_setProgress:function(t,e){this._currentReel.easing.setProgress(t,e)},isPlaying:function(t){return this._isPlaying?t?this._currentReelId===t:!!this._currentReelId:!1},getReel:function(t){if(0===arguments.length){if(!this._currentReelId)return null;t=this._currentReelId}return this._reels[t]}})},{&quot;./animation.js&quot;:5,&quot;./core.js&quot;:9}],24:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.extend({sprite:function(t,i,n,r,s,o,a){var h,c,u;&quot;string&quot;==typeof t&amp;&amp;(o=s,s=r,r=i,n=t,t=1,i=1),&quot;string&quot;==typeof i&amp;&amp;(o=s,s=r,r=n,n=i,i=t),!o&amp;&amp;s&amp;&amp;(o=s),s=parseInt(s||0,10),o=parseInt(o||0,10);var l=function(){this.ready=!0,this.trigger(&quot;Invalidate&quot;)};u=e.asset(n),u||(u=new Image,u.src=n,e.asset(n,u),u.onload=function(){for(var t in r)e(t).each(l)});var _=function(){this.requires(&quot;2D, Sprite&quot;),this.__trim=[0,0,0,0],this.__image=n,this.__coord=[this.__coord[0],this.__coord[1],this.__coord[2],this.__coord[3]],this.__tile=t,this.__tileh=i,this.__padding=[s,o],this.__padBorder=a,this.sprite(this.__coord[0],this.__coord[1],this.__coord[2],this.__coord[3]),this.img=u,this.img.complete&amp;&amp;this.img.width&gt;0&amp;&amp;(this.ready=!0,this.trigger(&quot;Invalidate&quot;)),this.w=this.__coord[2],this.h=this.__coord[3]};for(h in r)r.hasOwnProperty(h)&amp;&amp;(c=r[h],e.c(h,{ready:!1,__coord:[c[0],c[1],c[2]||1,c[3]||1],init:_}));return this}}),e.c(&quot;Sprite&quot;,{__image:&quot;&quot;,__tile:0,__tileh:0,__padding:null,__trim:null,img:null,ready:!1,init:function(){this.__trim=[0,0,0,0];var t=function(t){var e=t.co,i=t.pos,n=t.ctx;if(&quot;canvas&quot;===t.type)n.drawImage(this.img,e.x,e.y,e.w,e.h,i._x,i._y,i._w,i._h);else if(&quot;DOM&quot;===t.type){var r=this._h/e.h,s=this._w/e.w,o=this._element.style;o.background=o.backgroundColor+&quot; url(&#39;&quot;+this.__image+&quot;&#39;) no-repeat&quot;,o.backgroundPosition=&quot;-&quot;+e.x*s+&quot;px -&quot;+e.y*r+&quot;px&quot;,(1!=r||1!=s)&amp;&amp;(o.backgroundSize=this.img.width*s+&quot;px&quot;+&quot; &quot;+this.img.height*r+&quot;px&quot;)}};this.bind(&quot;Draw&quot;,t).bind(&quot;RemoveComponent&quot;,function(e){&quot;Sprite&quot;===e&amp;&amp;this.unbind(&quot;Draw&quot;,t)})},sprite:function(t,e,i,n){return this.__coord=this.__coord||[0,0,0,0],this.__coord[0]=t*(this.__tile+this.__padding[0])+(this.__padBorder?this.__padding[0]:0)+this.__trim[0],this.__coord[1]=e*(this.__tileh+this.__padding[1])+(this.__padBorder?this.__padding[1]:0)+this.__trim[1],i!==void 0&amp;&amp;n!==void 0&amp;&amp;(this.__coord[2]=this.__trim[2]||i*this.__tile||this.__tile,this.__coord[3]=this.__trim[3]||n*this.__tileh||this.__tileh),this.trigger(&quot;Invalidate&quot;),this},crop:function(t,e,i,n){var r=this._mbr||this.pos();return this.__trim=[],this.__trim[0]=t,this.__trim[1]=e,this.__trim[2]=i,this.__trim[3]=n,this.__coord[0]+=t,this.__coord[1]+=e,this.__coord[2]=i,this.__coord[3]=n,this._w=i,this._h=n,this.trigger(&quot;Invalidate&quot;,r),this}})},{&quot;./core.js&quot;:9}],25:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.storage=function(t,e){var i=window.localStorage,n=e;if(!i)return!1;if(1===arguments.length)try{return JSON.parse(i.getItem(t))}catch(r){return i.getItem(t)}else&quot;object&quot;==typeof e&amp;&amp;(n=JSON.stringify(e)),i.setItem(t,n)},e.storage.remove=function(t){window.localStorage.removeItem(t)}},{&quot;./core.js&quot;:9}],26:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.c(&quot;Text&quot;,{_text:&quot;&quot;,defaultSize:&quot;10px&quot;,defaultFamily:&quot;sans-serif&quot;,defaultVariant:&quot;normal&quot;,defaultLineHeight:&quot;normal&quot;,ready:!0,init:function(){this.requires(&quot;2D&quot;),this._textFont={type:&quot;&quot;,weight:&quot;&quot;,size:this.defaultSize,lineHeight:this.defaultLineHeight,family:this.defaultFamily,variant:this.defaultVariant},this.bind(&quot;Draw&quot;,function(t){var e=this._fontString();if(&quot;DOM&quot;===t.type){var i=this._element,n=i.style;n.color=this._textColor,n.font=e,i.innerHTML=this._text}else if(&quot;canvas&quot;===t.type){var r=t.ctx;r.save(),r.textBaseline=&quot;top&quot;,r.fillStyle=this._textColor||&quot;rgb(0,0,0)&quot;,r.font=e,r.fillText(this._text,this._x,this._y),r.restore()}})},_getFontHeight:function(){var t=/([a-zA-Z]+)\b/,e={px:1,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,&quot;in&quot;:96,em:void 0,ex:void 0};return function(i){var n=parseFloat(i),r=t.exec(i),s=r?r[1]:&quot;px&quot;;return void 0!==e[s]?Math.ceil(n*e[s]):Math.ceil(n)}}(),text:function(t){return void 0===t||null===t?this._text:(this._text=&quot;function&quot;==typeof t?t.call(this):t,this.has(&quot;Canvas&quot;)&amp;&amp;this._resizeForCanvas(),this.trigger(&quot;Invalidate&quot;),this)},_resizeForCanvas:function(){var t=e.canvas.context;t.font=this._fontString(),this.w=t.measureText(this._text).width;var i=this._textFont.size||this.defaultSize;this.h=1.1*this._getFontHeight(i)},_fontString:function(){return this._textFont.type+&quot; &quot;+this._textFont.variant+&quot; &quot;+this._textFont.weight+&quot; &quot;+this._textFont.size+&quot; / &quot;+this._textFont.lineHeight+&quot; &quot;+this._textFont.family},textColor:function(t,i){return this._strength=i,this._textColor=e.toRGB(t,this._strength),this.trigger(&quot;Invalidate&quot;),this},textFont:function(t,e){if(1===arguments.length){if(&quot;string&quot;==typeof t)return this._textFont[t];if(&quot;object&quot;==typeof t)for(var i in t)this._textFont[i]=&quot;family&quot;==i?&quot;&#39;&quot;+t[i]+&quot;&#39;&quot;:t[i]}else this._textFont[t]=e;return this.has(&quot;Canvas&quot;)&amp;&amp;this._resizeForCanvas(),this.trigger(&quot;Invalidate&quot;),this},unselectable:function(){return this.has(&quot;DOM&quot;)&amp;&amp;(this.css({&quot;-webkit-touch-callout&quot;:&quot;none&quot;,&quot;-webkit-user-select&quot;:&quot;none&quot;,&quot;-khtml-user-select&quot;:&quot;none&quot;,&quot;-moz-user-select&quot;:&quot;none&quot;,&quot;-ms-user-select&quot;:&quot;none&quot;,&quot;user-select&quot;:&quot;none&quot;}),this.trigger(&quot;Invalidate&quot;)),this}})},{&quot;./core.js&quot;:9}],27:[function(t){var e=t(&quot;./core.js&quot;);window.document,e.c(&quot;Delay&quot;,{init:function(){this._delays=[],this.bind(&quot;EnterFrame&quot;,function(){for(var t=(new Date).getTime(),e=this._delays.length;--e&gt;=0;){var i=this._delays[e];t&gt;i.start+i.delay+i.pause&amp;&amp;(i.func.call(this),i.repeat&gt;0?(i.start=t,i.pause=0,i.pauseBuffer=0,i.repeat--):0&gt;=i.repeat&amp;&amp;this._delays.splice(e,1))}}),this.bind(&quot;Pause&quot;,function(){var t=(new Date).getTime();for(var e in this._delays)this._delays[e].pauseBuffer=t}),this.bind(&quot;Unpause&quot;,function(){var t=(new Date).getTime();for(var e in this._delays){var i=this._delays[e];i.pause+=t-i.pauseBuffer}})},delay:function(t,e,i){return this._delays.push({start:(new Date).getTime(),func:t,delay:e,repeat:(0&gt;i?1/0:i)||0,pauseBuffer:0,pause:0}),this}})},{&quot;./core.js&quot;:9}],28:[function(t,e){e.exports=&quot;0.6.2&quot;},{}],29:[function(t){var e=t(&quot;./core.js&quot;),i=window.document;e.extend({viewport:{clampToEntities:!0,_width:0,_height:0,_x:0,_y:0,_scale:1,bounds:null,scroll:function(t,i){this[t]=i,e.trigger(&quot;ViewportScroll&quot;),e.trigger(&quot;InvalidateViewport&quot;)},rect_object:{_x:0,_y:0,_w:0,_h:0},rect:function(){return this.rect_object._x=-this._x,this.rect_object._y=-this._y,this.rect_object._w=this._width/this._scale,this.rect_object._h=this._height/this._scale,this.rect_object},pan:function(){function t(t){a.tick(t.dt);var h=a.value();e.viewport.x=(1-h)*s+h*n,e.viewport.y=(1-h)*o+h*r,e.viewport._clamp(),a.complete&amp;&amp;(i(),e.trigger(&quot;CameraAnimationDone&quot;))}function i(){e.unbind(&quot;EnterFrame&quot;,t)}var n,r,s,o,a;return e.bind(&quot;StopCamera&quot;,i),function(i,h,c){e.trigger(&quot;StopCamera&quot;),&quot;reset&quot;!=i&amp;&amp;(s=e.viewport._x,o=e.viewport._y,n=s-i,r=o-h,a=new e.easing(c),e.uniqueBind(&quot;EnterFrame&quot;,t))}}(),follow:function(){function t(){e.viewport.scroll(&quot;_x&quot;,-(this.x+this.w/2-e.viewport.width/2-r)),e.viewport.scroll(&quot;_y&quot;,-(this.y+this.h/2-e.viewport.height/2-s)),e.viewport._clamp()}function i(){n&amp;&amp;n.unbind(&quot;Move&quot;,t)}var n,r,s;return e.bind(&quot;StopCamera&quot;,i),function(i,o,a){i&amp;&amp;i.has(&quot;2D&quot;)&amp;&amp;(e.trigger(&quot;StopCamera&quot;),n=i,r=o!==void 0?o:0,s=a!==void 0?a:0,i.bind(&quot;Move&quot;,t),t.call(i))}}(),centerOn:function(t,i){var n=t.x+e.viewport.x,r=t.y+e.viewport.y,s=t.w/2,o=t.h/2,a=e.viewport.width/2,h=e.viewport.height/2,c=n+s-a,u=r+o-h;e.viewport.pan(c,u,i)},zoom:function(){function t(){e.unbind(&quot;EnterFrame&quot;,i)}function i(i){var r,l;u.tick(i.dt),r=Math.pow(s,u.value()),l=1===s?u.value():(1/r-1)/(1/s-1),e.viewport.scale(r*n),e.viewport.scroll(&quot;_x&quot;,o*(1-l)+a*l),e.viewport.scroll(&quot;_y&quot;,h*(1-l)+c*l),e.viewport._clamp(),u.complete&amp;&amp;(t(),e.trigger(&quot;CameraAnimationDone&quot;))}e.bind(&quot;StopCamera&quot;,t);var n,r,s,o,a,h,c,u;return function(t,l,_,d){return t?(2&gt;=arguments.length&amp;&amp;(d=l,l=e.viewport.x-e.viewport.width,_=e.viewport.y-e.viewport.height),e.trigger(&quot;StopCamera&quot;),n=e.viewport._scale,s=t,r=n*s,o=e.viewport.x,h=e.viewport.y,a=-(l-e.viewport.width/(2*r)),c=-(_-e.viewport.height/(2*r)),u=new e.easing(d),e.uniqueBind(&quot;EnterFrame&quot;,i),void 0):(e.viewport.scale(1),void 0)}}(),scale:function(){return function(t){this._scale=t?t:1,e.trigger(&quot;InvalidateViewport&quot;),e.trigger(&quot;ViewportScale&quot;)}}(),mouselook:function(){var t=!1,i=!1,n={};return old={},function(r,s){if(&quot;boolean&quot;==typeof r)return t=r,t?e.mouseObjs++:e.mouseObjs=Math.max(0,e.mouseObjs-1),void 0;if(t)switch(r){case&quot;move&quot;:case&quot;drag&quot;:if(!i)return;diff={x:s.clientX-n.x,y:s.clientY-n.y},n.x=s.clientX,n.y=s.clientY,e.viewport.x+=diff.x,e.viewport.y+=diff.y,e.viewport._clamp();break;case&quot;start&quot;:e.trigger(&quot;StopCamera&quot;),n.x=s.clientX,n.y=s.clientY,i=!0;break;case&quot;stop&quot;:i=!1}}}(),_clamp:function(){if(this.clampToEntities){var t=this.bounds||e.map.boundaries();t.max.x*=this._scale,t.min.x*=this._scale,t.max.y*=this._scale,t.min.y*=this._scale,t.max.x-t.min.x&gt;e.viewport.width?e.viewport.x&lt;-t.max.x+e.viewport.width?e.viewport.x=-t.max.x+e.viewport.width:e.viewport.x&gt;-t.min.x&amp;&amp;(e.viewport.x=-t.min.x):e.viewport.x=-1*(t.min.x+(t.max.x-t.min.x)/2-e.viewport.width/2),t.max.y-t.min.y&gt;e.viewport.height?e.viewport.y&lt;-t.max.y+e.viewport.height?e.viewport.y=-t.max.y+e.viewport.height:e.viewport.y&gt;-t.min.y&amp;&amp;(e.viewport.y=-t.min.y):e.viewport.y=-1*(t.min.y+(t.max.y-t.min.y)/2-e.viewport.height/2)}},init:function(t,n,r){e.DOM.window.init(),this._defineViewportProperties(),this._width=t?t:e.DOM.window.width,this._height=n?n:e.DOM.window.height,r===void 0&amp;&amp;(r=&quot;cr-stage&quot;);var s;if(&quot;string&quot;==typeof r)s=i.getElementById(r);else{if(!(&quot;undefined&quot;!=typeof HTMLElement?r instanceof HTMLElement:r instanceof Element))throw new TypeError(&quot;stage_elem must be a string or an HTMLElement&quot;);s=r}e.stage={x:0,y:0,fullscreen:!1,elem:s?s:i.createElement(&quot;div&quot;),inner:i.createElement(&quot;div&quot;)},t||n||(i.body.style.overflow=&quot;hidden&quot;,e.stage.fullscreen=!0),e.addEvent(this,window,&quot;resize&quot;,e.viewport.reload),e.addEvent(this,window,&quot;blur&quot;,function(){e.settings.get(&quot;autoPause&quot;)&amp;&amp;(e._paused||e.pause())}),e.addEvent(this,window,&quot;focus&quot;,function(){e._paused&amp;&amp;e.settings.get(&quot;autoPause&quot;)&amp;&amp;e.pause()}),e.settings.register(&quot;stageSelectable&quot;,function(t){e.stage.elem.onselectstart=t?function(){return!0}:function(){return!1}}),e.settings.modify(&quot;stageSelectable&quot;,!1),e.settings.register(&quot;stageContextMenu&quot;,function(t){e.stage.elem.oncontextmenu=t?function(){return!0}:function(){return!1}}),e.settings.modify(&quot;stageContextMenu&quot;,!1),e.settings.register(&quot;autoPause&quot;,function(){}),e.settings.modify(&quot;autoPause&quot;,!1),s||(i.body.appendChild(e.stage.elem),e.stage.elem.id=r);var o,a=e.stage.elem.style;if(e.stage.elem.appendChild(e.stage.inner),e.stage.inner.style.position=&quot;absolute&quot;,e.stage.inner.style.zIndex=&quot;1&quot;,e.stage.inner.style.transformStyle=&quot;preserve-3d&quot;,a.width=this.width+&quot;px&quot;,a.height=this.height+&quot;px&quot;,a.overflow=&quot;hidden&quot;,e.bind(&quot;ViewportResize&quot;,function(){e.trigger(&quot;InvalidateViewport&quot;)}),e.mobile){void 0!==typeof a.webkitTapHighlightColor&amp;&amp;(a.webkitTapHighlightColor=&quot;rgba(0,0,0,0)&quot;);var h=i.createElement(&quot;meta&quot;),c=i.getElementsByTagName(&quot;HEAD&quot;)[0];h=i.createElement(&quot;meta&quot;),h.setAttribute(&quot;name&quot;,&quot;apple-mobile-web-app-capable&quot;),h.setAttribute(&quot;content&quot;,&quot;yes&quot;),c.appendChild(h),e.addEvent(this,e.stage.elem,&quot;touchmove&quot;,function(t){t.preventDefault()})}else a.position=&quot;relative&quot;,o=e.DOM.inner(e.stage.elem),e.stage.x=o.x,e.stage.y=o.y},_defineViewportProperties:function(){e.support.setter?(this.__defineSetter__(&quot;x&quot;,function(t){this.scroll(&quot;_x&quot;,t)}),this.__defineSetter__(&quot;y&quot;,function(t){this.scroll(&quot;_y&quot;,t)}),this.__defineSetter__(&quot;width&quot;,function(t){this._width=t,e.trigger(&quot;ViewportResize&quot;)}),this.__defineSetter__(&quot;height&quot;,function(t){this._height=t,e.trigger(&quot;ViewportResize&quot;)}),this.__defineGetter__(&quot;x&quot;,function(){return this._x}),this.__defineGetter__(&quot;y&quot;,function(){return this._y}),this.__defineGetter__(&quot;width&quot;,function(){return this._width}),this.__defineGetter__(&quot;height&quot;,function(){return this._height})):e.support.defineProperty&amp;&amp;(Object.defineProperty(this,&quot;x&quot;,{set:function(t){this.scroll(&quot;_x&quot;,t)},get:function(){return this._x},configurable:!0}),Object.defineProperty(this,&quot;y&quot;,{set:function(t){this.scroll(&quot;_y&quot;,t)},get:function(){return this._y},configurable:!0}),Object.defineProperty(this,&quot;width&quot;,{set:function(t){this._width=t,e.trigger(&quot;ViewportResize&quot;)},get:function(){return this._width},configurable:!0}),Object.defineProperty(this,&quot;height&quot;,{set:function(t){this._height=t,e.trigger(&quot;ViewportResize&quot;)},get:function(){return this._height},configurable:!0}))},reload:function(){e.DOM.window.init();var t,i=e.DOM.window.width,n=e.DOM.window.height;e.stage.fullscreen&amp;&amp;(this._width=i,this._height=n,e.trigger(&quot;ViewportResize&quot;)),t=e.DOM.inner(e.stage.elem),e.stage.x=t.x,e.stage.y=t.y},reset:function(){e.viewport.mouselook(&quot;stop&quot;),e.trigger(&quot;StopCamera&quot;),e.viewport.scale(1)}}})},{&quot;./core.js&quot;:9}],30:[function(t){var e=t(&quot;./core.js&quot;),i=window.document,n=&quot;precision mediump float;void main(void) {gl_FragColor = vec4(0.0, 1.0, 1.0, 0.5);}&quot;,r=&quot;precision mediump float;void main(void) {gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);}&quot;;glHelpers={writeVec2:function(t,e,i,n,r){if(5==arguments.length)for(var s=0;4&gt;s;s++)t[e+i*s]=n,t[e+i*s+1]=r;else for(var s=0;4&gt;s;s++)t[e+i*s]=arguments[3+2*s],t[e+i*s+1]=arguments[4+2*s]},writeVec4:function(t,e,i,n,r,s,o){if(7==arguments.length)for(var a=0;4&gt;a;a++)t[e+i*a]=n,t[e+i*a+1]=r,t[e+i*a+2]=s,t[e+i*a+3]=o;else for(var a=0;4&gt;a;a++)t[e+i*a]=arguments[3+4*a],t[e+i*a+1]=arguments[4+4*a],t[e+i*a+2]=arguments[5+4*a],t[e+i*a+3]=arguments[6+4*a]},makeProgram:function(t,e,i){var t=this.context,n=this.compileShader(t,e,t.FRAGMENT_SHADER),r=this.compileShader(t,i,t.VERTEX_SHADER),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,n),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw&quot;Could not initialise shaders&quot;;return s.viewport=t.getUniformLocation(s,&quot;uViewport&quot;),s},compileShader:function(t,e,i){var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw t.getShaderInfoLog(n);return n}};var s=&quot;attribute vec2 aPosition;\r\nattribute vec4 aExtras;\r\nattribute vec4 aColor;\r\n\r\nvarying lowp vec4 vColor;\r\n\r\nuniform  vec4 uViewport;\r\n\r\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\r\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\r\n\r\nvec2 entityOrigin = aExtras.xy;\r\nmat2 entityRotationMatrix = mat2(cos(aExtras.w), sin(aExtras.w), -sin(aExtras.w), cos(aExtras.w));\r\n\r\nvoid main() {\r\n  vec2 pos = aPosition;\r\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\r\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aExtras.z) ), 1) );\r\n  vColor = aColor;\r\n}&quot;,o=&quot;attribute vec2 aPosition;\r\nattribute vec4 aExtras;\r\nattribute vec2 aTextureCoord;\r\n\r\nvarying mediump vec2 vTextureCoord;\r\n\r\nuniform vec4 uViewport;\r\nuniform mediump vec2 uTextureDimensions;\r\n\r\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\r\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\r\n\r\nvec2 entityOrigin = aExtras.xy;\r\nmat2 entityRotationMatrix = mat2(cos(aExtras.w), sin(aExtras.w), -sin(aExtras.w), cos(aExtras.w));\r\n\r\nvoid main() {\r\n  vec2 pos = aPosition;\r\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\r\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aExtras.z) ), 1) );\r\n  vTextureCoord = aTextureCoord;\r\n}\r\n&quot;,a=&quot;    varying mediump vec2 vTextureCoord;\r\n      \r\n    uniform sampler2D uSampler;\r\n    uniform mediump vec2 uTextureDimensions;\r\n\r\n    void main(void) {\r\n      highp vec2 coord =   vTextureCoord / uTextureDimensions;\r\n      gl_FragColor = texture2D(uSampler, coord);\r\n    }&quot;;</div><div class='line' id='LC12'>e.c(&quot;TestSquare&quot;,{init:function(){this.has(&quot;WebGL&quot;)&amp;&amp;this._establishShader(&quot;TestSquare&quot;,this._fragmentShader)},_fragmentShader:n}),e.c(&quot;TestSquareWhite&quot;,{init:function(){this.has(&quot;WebGL&quot;)&amp;&amp;this._establishShader(&quot;TestSquareWhite&quot;,this._fragmentShader)},_fragmentShader:r}),e.c(&quot;TestColor&quot;,{init:function(){this.has(&quot;WebGL&quot;)&amp;&amp;(this.webgl.context,this._establishShader(&quot;TestColor&quot;,this._fragmentShader,this._vertexShader),this._shaderProgram.posLocation===void 0&amp;&amp;this._specializeProgram(),this._glNum=this._shaderProgram._elementCount++),this._red=this._blue=this._green=1,this.bind(&quot;Draw&quot;,this._drawColor)},_specializeProgram:function(){var t=this.webgl.context;console.log(&quot;setting positions&quot;);var e=this._shaderProgram;e._bufferArray=new Float32Array(4e3),e._kingBuffer=t.createBuffer(),e.index=new Uint16Array(600),e._indexBuffer=t.createBuffer(),e.posLocation=t.getAttribLocation(e,&quot;aPosition&quot;),t.enableVertexAttribArray(e.posLocation),e.extrasLocation=t.getAttribLocation(e,&quot;aExtras&quot;),t.enableVertexAttribArray(e.extrasLocation),e.colLocation=t.getAttribLocation(e,&quot;aColor&quot;),t.enableVertexAttribArray(e.colLocation),e._elementCount=0;var i=Float32Array.BYTES_PER_ELEMENT,n=10*i;e.stride=n,e.switchTo=function(){t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,e._kingBuffer),t.vertexAttribPointer(e.posLocation,2,t.FLOAT,!1,n,0),t.vertexAttribPointer(e.extrasLocation,4,t.FLOAT,!1,n,2*i),t.vertexAttribPointer(e.colLocation,4,t.FLOAT,!1,n,6*i)},e.renderBatch=function(){t.bindBuffer(t.ARRAY_BUFFER,e._kingBuffer),t.bufferData(t.ARRAY_BUFFER,e._bufferArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.index,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,e.pointer,t.UNSIGNED_SHORT,0)}},_fragmentShader:&quot;precision mediump float;varying lowp vec4 vColor;void main(void) {  gl_FragColor = vColor;}&quot;,_vertexShader:s,_drawColor:function(t){var e=(t.gl,t.program);this._writeToArray(e._bufferArray);var i=4*this._glNum,n=e.index,r=e.pointer;n[0+r]=0+i,n[1+r]=1+i,n[2+r]=2+i,n[3+r]=1+i,n[4+r]=2+i,n[5+r]=3+i,e.pointer+=6},_writeToArray:function(t){var e=10,i=4*e*this._glNum;glHelpers.writeVec2(t,i,e,this._x,this._y,this._x,this._y+this._h,this._x+this._w,this._y,this._x+this._w,this._y+this._h),glHelpers.writeVec4(t,i+2,e,this._origin.x+this._x,this._origin.y+this._y,this._z,this._rotation),glHelpers.writeVec4(t,i+6,e,this._red,this._green,this._blue,1)},color:function(t,e,i){return this._red=t,this._green=e,this._blue=i,this}}),e.c(&quot;GLSprite&quot;,{init:function(){this.has(&quot;WebGL&quot;)&amp;&amp;(this.webgl.context,this._establishShader(this.__image,this._fragmentShader,this._vertexShader),this._shaderProgram.posLocation===void 0&amp;&amp;this._specializeProgram(),this._glNum=this._shaderProgram._elementCount++),this.bind(&quot;Draw&quot;,this._drawSprite)},_specializeProgram:function(){var t=this.webgl.context,e=this.webgl;console.log(&quot;setting sprite positions&quot;);var i=this._shaderProgram;i.__texture=e.makeTexture(this.__image,this.img),e.bindTexture(this._shaderProgram,i.__texture),i._bufferArray=new Float32Array(4e3),i._kingBuffer=t.createBuffer(),i.index=new Uint16Array(600),i._indexBuffer=t.createBuffer(),i.posLocation=t.getAttribLocation(i,&quot;aPosition&quot;),t.enableVertexAttribArray(i.posLocation),i.extrasLocation=t.getAttribLocation(i,&quot;aExtras&quot;),t.enableVertexAttribArray(i.extrasLocation),i.textureLocation=t.getAttribLocation(i,&quot;aTextureCoord&quot;),t.enableVertexAttribArray(i.textureLocation),i._elementCount=0;var n=Float32Array.BYTES_PER_ELEMENT,r=8*n;i.stride=r,i.switchTo=function(){t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,i._kingBuffer),t.vertexAttribPointer(i.posLocation,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(i.extrasLocation,4,t.FLOAT,!1,r,2*n),t.vertexAttribPointer(i.colLocation,4,t.FLOAT,!1,r,6*n)},i.renderBatch=function(){t.bindBuffer(t.ARRAY_BUFFER,i._kingBuffer),t.bufferData(t.ARRAY_BUFFER,i._bufferArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i.index,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,i.pointer,t.UNSIGNED_SHORT,0)}},_fragmentShader:a,_vertexShader:o,_drawSprite:function(t){var e=(t.gl,t.program);this._writeToArray(e._bufferArray,t.co);var i=4*this._glNum,n=e.index,r=e.pointer;n[0+r]=0+i,n[1+r]=1+i,n[2+r]=2+i,n[3+r]=1+i,n[4+r]=2+i,n[5+r]=3+i,e.pointer+=6},_writeToArray:function(t,e){var i=8,n=4*i*this._glNum;glHelpers.writeVec2(t,n,i,this._x,this._y,this._x,this._y+this._h,this._x+this._w,this._y,this._x+this._w,this._y+this._h),glHelpers.writeVec4(t,n+2,i,this._origin.x+this._x,this._origin.y+this._y,this._z,this._rotation),glHelpers.writeVec2(t,n+6,i,e.x,e.y,e.x,e.y+e.h,e.x+e.w,e.y,e.x+e.w,e.y+e.h)}}),e.c(&quot;WebGL&quot;,{init:function(){e.webgl.context||e.webgl.init();var t=this.webgl=e.webgl;t.context,t.entities++,this._changed=!0,t.add(this),this.bind(&quot;Change&quot;,function(){this._changed===!1&amp;&amp;(this._changed=!0,t.add(this))}),this.bind(&quot;Remove&quot;,function(){t.entities--,this._changed=!0,t.add(this)})},drawVars:{type:&quot;webgl&quot;,pos:{},ctx:null,coord:[0,0,0,0],co:{x:0,y:0,w:0,h:0}},draw:function(t,e,i,n,r){if(this.ready){4===arguments.length&amp;&amp;(r=n,n=i,i=e,e=t,t=this.webgl.context);var s=this.drawVars.pos;s._x=this._x+(e||0),s._y=this._y+(i||0),s._w=n||this._w,s._h=r||this._h;var o=this.__coord||[0,0,0,0],a=this.drawVars.co;a.x=o[0]+(e||0),a.y=o[1]+(i||0),a.w=n||o[2],a.h=r||o[3],this._flipX||this._flipY,1&gt;this._alpha;var h=this.webgl.context;return this.drawVars.gl=h,this.drawVars.program=this._shaderProgram,this.trigger(&quot;Draw&quot;,this.drawVars),this}},_establishShader:function(t,e,i){console.log(&quot;Establishing shader&quot;);var n=this.webgl;n.programs[t]===void 0&amp;&amp;(n.programs[t]=glHelpers.makeProgram(gl,e,i)),this._shaderProgram=n.programs[t],this.ready=!0}}),e.extend({webgl:{context:null,entities:0,changed_objects:[],add:function(t){this.changed_objects.push(t)},programs:{},compileShader:function(t,e){var i=this.context,n=i.createShader(e);if(i.shaderSource(n,t),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw i.getShaderInfoLog(n);return n},makeProgram:function(t,e){console.log(&quot;Making program&quot;),console.log(t);var i=this.context,n=this.compileShader(t,i.FRAGMENT_SHADER),r=e?this.compileShader(e,i.VERTEX_SHADER):this.defaultVertexShader,s=i.createProgram();if(i.attachShader(s,r),i.attachShader(s,n),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS))throw&quot;Could not initialise shaders&quot;;return s.viewport=i.getUniformLocation(s,&quot;uViewport&quot;),s},textures:{},textureCount:0,makeTexture:function(t,e){var i=this;if(i.textures[t]!==void 0)return i.textures[t];var n=i.context,r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n[&quot;TEXTURE&quot;+i.textureCount]),n.bindTexture(n.TEXTURE_2D,r),i.textures[t]={t:r,sampler:i.textureCount,key:&quot;TEXTURE&quot;+i.textureCount,width:e.width,height:e.height,url:t},i.textureCount++,n.activeTexture(n[&quot;TEXTURE&quot;+i.textureCount]),i.textures[t]},bindTexture:function(t,e){void 0===t.texture_obj&amp;&amp;(this.context,gl.useProgram(t),gl.uniform1i(gl.getUniformLocation(t,&quot;uSampler&quot;),e.sampler),gl.uniform2f(gl.getUniformLocation(t,&quot;uTextureDimensions&quot;),e.width,e.height),t.texture_obj=e)},init:function(){if(!e.support.webgl)return e.trigger(&quot;NoWebGL&quot;),e.stop(),void 0;var t;t=i.createElement(&quot;canvas&quot;),t.width=e.viewport.width,t.height=e.viewport.height,t.style.position=&quot;absolute&quot;,t.style.left=&quot;0px&quot;,t.style.top=&quot;0px&quot;,e.stage.elem.appendChild(t);var n;try{n=t.getContext(&quot;webgl&quot;)||t.getContext(&quot;experimental-webgl&quot;),n.viewportWidth=t.width,n.viewportHeight=t.height}catch(r){}if(!n)return e.trigger(&quot;NoWebGL&quot;),void 0;this.context=n,this._canvas=t,n.clearColor(0,0,0,0),n.enable(n.DEPTH_TEST);var s=this;e.uniqueBind(&quot;RenderScene&quot;,s.render),e.uniqueBind(&quot;ViewportResize&quot;,s._resize),e.uniqueBind(&quot;InvalidateViewport&quot;,function(){s.dirtyViewport=!0}),this.dirtyViewport=!0,console.log(&quot;webgl inited&quot;)},_resize:function(){var t=e.webgl._canvas;t.width=e.viewport.width,t.height=e.viewport.height,gl.viewportWidth=t.widtxh,gl.viewportHeight=t.height},setViewportUniforms:function(t){gl=this.webgl.context,gl.useProgram(t);var i=e.viewport;gl.uniform4f(t.viewport,i._x,i._y,i._width,i._height)},render:function(t){t=t||e.viewport.rect();var i,n=e.map.search(t),r=0,s=n.length,o=e.webgl,a=o.context;a.viewport(0,0,a.viewportWidth,a.viewportHeight),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);var h,c=o.programs;if(o.dirtyViewport){for(var u in c)o.setViewportUniforms(c[u]);o.dirtyViewport=!1}var l=0;for(h=null;s&gt;r;r++)i=n[r],i._visible&amp;&amp;i.__c.WebGL&amp;&amp;(h!==i._shaderProgram&amp;&amp;(null!==h&amp;&amp;(h.renderBatch(),l++),h=i._shaderProgram,h.pointer=0,h.switchTo()),i.draw(),i._changed=!1);null!==h&amp;&amp;(h.renderBatch(),l++),console.log(&quot;Batches: &quot;+l)}}})},{&quot;./core.js&quot;:9}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]);</div></pre></div></td>
          </tr>
        </table>
  </div>

  </div>
</div>

<a href="#jump-to-line" rel="facebox[.linejump]" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
<div id="jump-to-line" style="display:none">
  <form accept-charset="UTF-8" class="js-jump-to-line-form">
    <input class="linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" autofocus>
    <button type="submit" class="button">Go</button>
  </form>
</div>

        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.04791s from github-fe134-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-remove-close close js-ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  </body>
</html>

